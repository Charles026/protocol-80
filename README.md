# Monolith Paper Writer

<div align="center">

**ä¸€ä¸ªåŸºäºæµè§ˆå™¨çš„ Typst å®æ—¶ç¼–è¾‘å™¨ï¼Œæ— éœ€æœåŠ¡å™¨å³å¯åœ¨æµè§ˆå™¨ä¸­ç¼–è¯‘å’Œé¢„è§ˆ Typst æ–‡æ¡£**

[![React](https://img.shields.io/badge/React-19.2.1-blue.svg)](https://react.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.9.3-blue.svg)](https://www.typescriptlang.org/)
[![Vite](https://img.shields.io/badge/Vite-7.2.6-646CFF.svg)](https://vitejs.dev/)
[![Typst](https://img.shields.io/badge/Typst-0.6.1-239dad.svg)](https://typst.app/)

</div>

## ğŸ“– ç®€ä»‹

Monolith Paper Writer æ˜¯ä¸€ä¸ªå®Œå…¨åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ Typst ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨ WebAssembly (WASM) æŠ€æœ¯å®ç°äº† Typst ç¼–è¯‘å™¨çš„æµè§ˆå™¨ç«¯è¿è¡Œã€‚æ— éœ€åç«¯æœåŠ¡å™¨ï¼Œå³å¯äº«å—å®æ—¶ç¼–è¯‘ã€é¢„è§ˆå’Œç¼–è¾‘ Typst æ–‡æ¡£çš„æµç•…ä½“éªŒã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **é›¶æœåŠ¡å™¨ä¾èµ–** - å®Œå…¨åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œæ— éœ€åç«¯æœåŠ¡
- âš¡ **å®æ—¶ç¼–è¯‘** - è¾“å…¥å³ç¼–è¯‘ï¼Œ400ms é˜²æŠ–ä¼˜åŒ–ï¼Œæµç•…ä¸å¡é¡¿
- ğŸ¨ **åŒæ å¸ƒå±€** - æºç ç¼–è¾‘å™¨ä¸é¢„è§ˆé¢æ¿å¹¶æ’æ˜¾ç¤º
- ğŸ“Š **çŠ¶æ€ç›‘æ§** - å®æ—¶æ˜¾ç¤ºç¼–è¯‘çŠ¶æ€ã€ç¼–è¯‘æ—¶é—´å’Œè¾“å‡ºå¤§å°
- ğŸ” **é”™è¯¯è¯Šæ–­** - æ¸…æ™°çš„é”™è¯¯æç¤ºå’Œè¯Šæ–­ä¿¡æ¯
- ğŸ“± **å“åº”å¼è®¾è®¡** - é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- ğŸ¯ **TypeScript ä¸¥æ ¼æ¨¡å¼** - å®Œæ•´çš„ç±»å‹å®‰å…¨ä¿éšœ
- ğŸ› ï¸ **ç°ä»£åŒ–å·¥å…·é“¾** - React 19 + Vite + TypeScript

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **React 19.2.1** - æœ€æ–°çš„ React å¹¶å‘æ¸²æŸ“ç‰¹æ€§
- **TypeScript 5.9.3** - ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
- **Vite 7.2.6** - æé€Ÿçš„å¼€å‘ä½“éªŒå’Œæ„å»ºå·¥å…·

### Typst é›†æˆ
- **@myriaddreamin/typst.ts** - Typst TypeScript SDK
- **@myriaddreamin/typst-ts-web-compiler** - WebAssembly ç¼–è¯‘å™¨
- **@myriaddreamin/typst-ts-renderer** - æ–‡æ¡£æ¸²æŸ“å™¨
- **@myriaddreamin/typst.react** - React ç»„ä»¶é›†æˆ

### å¼€å‘å·¥å…·
- **vite-plugin-wasm** - WASM æ¨¡å—æ”¯æŒ
- **vite-plugin-top-level-await** - Top-level await æ”¯æŒ
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Node.js** >= 18.0.0
- **pnpm** >= 8.0.0ï¼ˆæ¨èï¼‰æˆ– npm >= 9.0.0

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm install

# æˆ–ä½¿ç”¨ npm
npm install
```

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æˆ–
npm run dev
```

å¼€å‘æœåŠ¡å™¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# é¢„è§ˆç”Ÿäº§æ„å»º
pnpm preview
```

æ„å»ºäº§ç‰©å°†è¾“å‡ºåˆ° `dist/` ç›®å½•ã€‚

### ä»£ç æ£€æŸ¥

```bash
# è¿è¡Œ ESLint
pnpm lint
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
monolith-paper-writer/
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”‚   â””â”€â”€ typst.svg          # Typst å›¾æ ‡
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TypstEditor.tsx    # ä¸»ç¼–è¾‘å™¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TypstPreview.tsx   # é¢„è§ˆç»„ä»¶
â”‚   â”‚   â””â”€â”€ index.ts           # ç»„ä»¶å¯¼å‡º
â”‚   â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useTypstCompiler.ts # Typst ç¼–è¯‘å™¨ Hook
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useDebounce.ts  # é˜²æŠ– Hook
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ App.tsx            # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx           # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ index.css          # å…¨å±€æ ·å¼
â”œâ”€â”€ index.html             # HTML æ¨¡æ¿
â”œâ”€â”€ vite.config.ts         # Vite é…ç½®
â”œâ”€â”€ tsconfig.json          # TypeScript é…ç½®
â””â”€â”€ package.json           # é¡¹ç›®é…ç½®
```

## ğŸ’¡ ä½¿ç”¨è¯´æ˜

### åŸºæœ¬ä½¿ç”¨

1. **å¯åŠ¨åº”ç”¨** - è¿è¡Œ `pnpm dev` å¯åŠ¨å¼€å‘æœåŠ¡å™¨
2. **ç¼–è¾‘æºç ** - åœ¨å·¦ä¾§æºç ç¼–è¾‘å™¨ä¸­è¾“å…¥æˆ–ä¿®æ”¹ Typst ä»£ç 
3. **å®æ—¶é¢„è§ˆ** - å³ä¾§é¢„è§ˆé¢æ¿ä¼šè‡ªåŠ¨æ˜¾ç¤ºç¼–è¯‘ç»“æœï¼ˆ400ms é˜²æŠ–ï¼‰
4. **æ‰‹åŠ¨ç¼–è¯‘** - ç‚¹å‡» "Compile" æŒ‰é’®å¯ç«‹å³è§¦å‘ç¼–è¯‘

### çŠ¶æ€æ è¯´æ˜

- **çŠ¶æ€æŒ‡ç¤ºå™¨** - æ˜¾ç¤ºå½“å‰ç¼–è¯‘å™¨çŠ¶æ€ï¼š
  - `idle` - åˆå§‹çŠ¶æ€
  - `initializing` - æ­£åœ¨åˆå§‹åŒ– WASM
  - `ready` - å°±ç»ªï¼Œå¯ä»¥ç¼–è¯‘
  - `compiling` - æ­£åœ¨ç¼–è¯‘
  - `error` - å‘ç”Ÿé”™è¯¯

- **ç¼–è¯‘æ—¶é—´** - æ˜¾ç¤ºæœ€è¿‘ä¸€æ¬¡ç¼–è¯‘è€—æ—¶ï¼ˆæ¯«ç§’ï¼‰
- **è¾“å‡ºå¤§å°** - æ˜¾ç¤ºç¼–è¯‘äº§ç‰©å¤§å°ï¼ˆKBï¼‰

### é”™è¯¯å¤„ç†

- ç¼–è¯‘é”™è¯¯ä¼šæ˜¾ç¤ºåœ¨é¢„è§ˆåŒºåŸŸä¸Šæ–¹
- é”™è¯¯ä¿¡æ¯åŒ…å«è¯¦ç»†çš„è¯Šæ–­ä¿¡æ¯
- å¯ä»¥ç‚¹å‡» "Ã—" æŒ‰é’®å…³é—­é”™è¯¯æç¤º

## ğŸ”§ å¼€å‘æŒ‡å—

### æ¶æ„è®¾è®¡

#### ç¼–è¯‘å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†

`useTypstCompiler` Hook å®ç°äº†å•ä¾‹æ¨¡å¼çš„ç¼–è¯‘å™¨ç®¡ç†ï¼š

- **å•ä¾‹æ¨¡å¼** - æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­åªåˆå§‹åŒ–ä¸€æ¬¡ç¼–è¯‘å™¨å®ä¾‹
- **å¹¶å‘å®‰å…¨** - ä½¿ç”¨ Promise ç¡®ä¿å¹¶å‘åˆå§‹åŒ–è¯·æ±‚åªæ‰§è¡Œä¸€æ¬¡
- **çŠ¶æ€ç®¡ç†** - é€šè¿‡ React Hook ç®¡ç†ç¼–è¯‘å™¨çŠ¶æ€å’Œé”™è¯¯

#### é˜²æŠ–ç¼–è¯‘

ä½¿ç”¨ `useDebouncedCallback` å®ç° 400ms é˜²æŠ–ï¼Œé¿å…é¢‘ç¹ç¼–è¯‘ï¼š

```typescript
const debouncedCompile = useDebouncedCallback(doCompile, 400)
```

#### WASM æ¨¡å—åŠ è½½

ç¼–è¯‘å™¨é€šè¿‡åŠ¨æ€å¯¼å…¥åŠ è½½ WASM æ¨¡å—ï¼š

```typescript
const wasmUrl = new URL(
  '@myriaddreamin/typst-ts-web-compiler/pkg/typst_ts_web_compiler_bg.wasm',
  import.meta.url
).href
```

### ä»£ç è§„èŒƒ

- **TypeScript ä¸¥æ ¼æ¨¡å¼** - å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- **å‡½æ•°å¼ç»„ä»¶** - ä½¿ç”¨ React Hooks è¿›è¡ŒçŠ¶æ€ç®¡ç†
- **ç±»å‹å®‰å…¨** - æ‰€æœ‰å‡½æ•°å’Œç»„ä»¶éƒ½æœ‰å®Œæ•´çš„ç±»å‹å®šä¹‰
- **é”™è¯¯å¤„ç†** - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ–°ç»„ä»¶** - åœ¨ `src/components/` ç›®å½•ä¸‹åˆ›å»º
2. **æ–° Hook** - åœ¨ `src/hooks/` ç›®å½•ä¸‹åˆ›å»º
3. **å·¥å…·å‡½æ•°** - åœ¨ `src/utils/` ç›®å½•ä¸‹åˆ›å»º
4. **ç±»å‹å®šä¹‰** - åœ¨å¯¹åº”çš„æ–‡ä»¶ä¸­å®šä¹‰æˆ–åˆ›å»º `types.ts`

## ğŸ—ï¸ æ„å»ºå’Œéƒ¨ç½²

### Vite é…ç½®è¦ç‚¹

- **WASM æ”¯æŒ** - ä½¿ç”¨ `vite-plugin-wasm` å’Œ `vite-plugin-top-level-await`
- **æ„å»ºç›®æ ‡** - è®¾ç½®ä¸º `esnext` ä»¥æ”¯æŒ WASM ES æ¨¡å—
- **ä¼˜åŒ–æ’é™¤** - æ’é™¤ Typst WASM ç›¸å…³åŒ…ï¼Œé˜²æ­¢é¢„æ„å»ºå¯¼è‡´è·¯å¾„é”™è¯¯
- **CORS å¤´** - å¼€å‘æœåŠ¡å™¨é…ç½®å¿…è¦çš„ CORS å¤´

### éƒ¨ç½²åˆ°é™æ€æ‰˜ç®¡

æ„å»ºåçš„ `dist/` ç›®å½•å¯ä»¥éƒ¨ç½²åˆ°ä»»ä½•é™æ€æ‰˜ç®¡æœåŠ¡ï¼š

- **Vercel** - ç›´æ¥è¿æ¥ GitHub ä»“åº“è‡ªåŠ¨éƒ¨ç½²
- **Netlify** - æ‹–æ‹½ `dist/` ç›®å½•æˆ–è¿æ¥ Git ä»“åº“
- **GitHub Pages** - ä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½²
- **Cloudflare Pages** - è¿æ¥ Git ä»“åº“è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. **Fork ä»“åº“** - åˆ›å»ºä½ çš„ Fork
2. **åˆ›å»ºåˆ†æ”¯** - `git checkout -b feature/your-feature-name`
3. **æäº¤æ›´æ”¹** - `git commit -m 'Add some feature'`
4. **æ¨é€åˆ†æ”¯** - `git push origin feature/your-feature-name`
5. **æäº¤ PR** - åœ¨ GitHub ä¸Šåˆ›å»º Pull Request

### ä»£ç æäº¤è§„èŒƒ

- ä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯
- ç¡®ä¿ä»£ç é€šè¿‡ ESLint æ£€æŸ¥
- æ·»åŠ å¿…è¦çš„ç±»å‹å®šä¹‰å’Œæ³¨é‡Š
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- [Typst](https://typst.app/) - ç°ä»£åŒ–çš„ç§‘å­¦æ’ç‰ˆç³»ç»Ÿ
- [typst.ts](https://github.com/Myriad-Dreamin/typst.ts) - Typst TypeScript SDK
- [React](https://react.dev/) - ç”¨æˆ·ç•Œé¢åº“
- [Vite](https://vitejs.dev/) - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- **GitHub Issues** - [æäº¤ Issue](https://github.com/Charles026/protocol-80/issues)
- **Pull Requests** - [æäº¤ PR](https://github.com/Charles026/protocol-80/pulls)

---

<div align="center">

**ç”¨ â¤ï¸ å’Œ TypeScript æ„å»º**

[â¬† å›åˆ°é¡¶éƒ¨](#monolith-paper-writer)

</div>

