/*
THIS IS A GENERATED/BUNDLED FILE BY VITE
if you want to view the source, please visit the github repository https://github.com/Myriad-Dreamin/typst.ts/blob/main/packages/typst.ts
*/
"use strict";var Ue=Object.defineProperty;var qe=(n,t,e)=>t in n?Ue(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var p=(n,t,e)=>qe(n,typeof t!="symbol"?t+"":t,e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});var rt=typeof document<"u"?document.currentScript:null;class Ne{constructor(){p(this,"loadedFonts",new Set);p(this,"fetcher",fetch)}setFetcher(t){this.fetcher=t}async loadFonts(t,e){const r=new Function("m","return import(m)"),i=this.fetcher||(this.fetcher=await async function(){const{fetchBuilder:u,FileSystemCache:d}=await r("node-fetch-cache"),g=new d({cacheDirectory:".cache/typst/fonts"}),l=u.withCache(g);return function(m,C){const R=setTimeout(()=>{console.warn("font fetching is stucking:",m)},15e3);return l(m,C).finally(()=>{clearTimeout(R)})}}()),o=e.filter(u=>u instanceof Uint8Array||typeof u=="object"&&"info"in u?!0:this.loadedFonts.has(u)?!1:(this.loadedFonts.add(u),!0)),s=await Promise.all(o.map(async u=>{if(u instanceof Uint8Array){await t.add_raw_font(u);return}if(typeof u=="object"&&"info"in u){await t.add_lazy_font(u,"blob"in u?u.blob:me(u));return}return new Uint8Array(await(await i(u)).arrayBuffer())}));for(const u of s)u&&await t.add_raw_font(u)}async build(t,e,r){const i={ref:this,builder:e,hooks:r};for(const o of(t==null?void 0:t.beforeBuild)??[])await o(void 0,i);return r.latelyBuild&&r.latelyBuild(i),await e.build()}}async function he(n,t,e,r){var i;return await t.init((i=n==null?void 0:n.getModule)==null?void 0:i.call(n)),await new Ne().build(n,new e,r)}function me(n){return()=>{const t=new XMLHttpRequest;return t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",n.url,!1),t.send(null),t.status===200&&(t.response instanceof String||typeof t.response=="string")?Uint8Array.from(t.response,e=>e.charCodeAt(0)):new Uint8Array}}const He=["DejaVuSansMono-Bold.ttf","DejaVuSansMono-BoldOblique.ttf","DejaVuSansMono-Oblique.ttf","DejaVuSansMono.ttf","LibertinusSerif-Bold.otf","LibertinusSerif-BoldItalic.otf","LibertinusSerif-Italic.otf","LibertinusSerif-Regular.otf","LibertinusSerif-Semibold.otf","LibertinusSerif-SemiboldItalic.otf","NewCM10-Bold.otf","NewCM10-BoldItalic.otf","NewCM10-Italic.otf","NewCM10-Regular.otf","NewCMMath-Bold.otf","NewCMMath-Book.otf","NewCMMath-Regular.otf"],Je=["InriaSerif-Bold.ttf","InriaSerif-BoldItalic.ttf","InriaSerif-Italic.ttf","InriaSerif-Regular.ttf","Roboto-Regular.ttf","NotoSerifCJKsc-Regular.otf"],Ve=["TwitterColorEmoji.ttf","NotoColorEmoji-Regular-COLR.subset.ttf"];function Ge(n){var e,r;const t=[];if(n&&(n==null?void 0:n.assets)!==!1&&((e=n==null?void 0:n.assets)!=null&&e.length)&&((r=n==null?void 0:n.assets)==null?void 0:r.length)>0){let i={text:"https://cdn.jsdelivr.net/gh/typst/typst-assets@v0.13.1/files/fonts/",_:"https://cdn.jsdelivr.net/gh/typst/typst-dev-assets@v0.13.1/files/fonts/"},o=n.assetUrlPrefix??i;typeof o=="string"?o={_:o}:o={...i,...o};for(const u of Object.keys(o)){const d=o[u];d[d.length-1]!=="/"&&(o[u]=d+"/")}const s=(u,d)=>d.map(g=>(o[u]||o._)+g);for(const u of n.assets)switch(u){case"text":t.push(...s(u,He));break;case"cjk":t.push(...s(u,Je));break;case"emoji":t.push(...s(u,Ve));break}}return t}function Xe(n,t){return X(n,t)}function X(n,t){const e=Ge(t),r=async(i,{ref:o,builder:s})=>{t!=null&&t.fetcher&&o.setFetcher(t.fetcher),await o.loadFonts(s,[...n,...e])};return r._preloadRemoteFontOptions=t,r._kind="fontLoader",r}function Pt({byFamily:n}){return async(t,{builder:e})=>{const r=performance.now();if("queryLocalFonts"in window){const o=await window.queryLocalFonts();n=n??[];for(const s of o){if(!n.includes(s.family))continue;const u=await(await s.blob()).arrayBuffer();await e.add_raw_font(new Uint8Array(u))}}const i=performance.now();console.log("preload system font time used:",i-r)}}function Ke(n){return async(t,{builder:e})=>new Promise(r=>{e.set_package_registry(n,function(i){return n.resolve(i,this)}),r()})}function Qe(n){return async(t,e)=>{var r;if(e.alreadySetAccessModel)throw new Error(`already set some assess model before: ${(r=e.alreadySetAccessModel.constructor)==null?void 0:r.name}(${e.alreadySetAccessModel})`);return e.alreadySetAccessModel=n,new Promise(i=>{e.builder.set_access_model(n,o=>{const s=n.getMTime(o);return s?s.getTime():0},o=>n.isFile(o)||!1,o=>n.getRealPath(o)||o,o=>n.readAll(o)),i()})}}const x=Symbol.for("reflexo-obj");var qt=(n=>(n[n.PIXEL_PER_PT=3]="PIXEL_PER_PT",n))(qt||{});class ye{constructor(t,e,r){p(this,"loadPageCount");p(this,"imageScaleFactor");p(this,"container");p(this,"canvasList");p(this,"textLayerList");p(this,"commonList");p(this,"textLayerParentList");p(this,"semanticLayerList");this.pageInfos=t,this.imageScaleFactor=r.pixelPerPt??qt.PIXEL_PER_PT,e.innerHTML="",e.style.width="100%",this.container=e,this.canvasList=new Array(this.loadPageCount),this.textLayerList=new Array(this.loadPageCount),this.commonList=new Array(this.loadPageCount),this.textLayerParentList=new Array(this.loadPageCount),this.semanticLayerList=new Array(this.loadPageCount);const i=(o,s,u)=>{const d=Math.ceil(s.width)*this.imageScaleFactor,g=Math.ceil(s.height)*this.imageScaleFactor,l=this.canvasList[o]=document.createElement("canvas"),m=this.semanticLayerList[o]=document.createElement("div"),C=this.textLayerList[o]=document.createElement("div"),R=this.textLayerParentList[o]=document.createElement("div");if(l.getContext("2d")){const D=document.createElement("div");l.width=d,l.height=g,D.appendChild(l),u.appendChild(D),D.style.position="absolute"}{R.appendChild(C),R.className="typst-html-semantics";const D=e.offsetWidth,B=D/s.width;R.style.width=`${D}px`,R.style.height=`${s.height*B}px`,R.style.setProperty("--data-text-width",`${B}px`),R.style.setProperty("--data-text-height",`${B}px`),u.classList.add("typst-page"),u.classList.add("canvas"),u.style.width=`${D}px`,u.style.height=`${g*B}px`,u.style.position="relative",m.appendChild(R),u.appendChild(m)}};for(let o=0;o<this.pageInfos.length;o++){const s=this.pageInfos[o];let u;u=this.commonList[o]=document.createElement("div"),e.appendChild(u),i(o,s,u)}}resetLayout(){for(let t=0;t<this.pageInfos.length;t++){const e=this.pageInfos[t],r=Math.ceil(e.width)*this.imageScaleFactor,i=Math.ceil(e.height)*this.imageScaleFactor,o=this.canvasList[t].parentElement;if(!o)throw new Error(`canvasDiv is null for page ${t}, canvas list length ${this.canvasList.length}`);const s=this.commonList[t],u=this.textLayerParentList[t],d=this.container.offsetWidth,g=d/r;u.style.width=`${d}px`,u.style.height=`${i*g}px`,s.style.width=`${d}px`,s.style.height=`${i*g}px`;const l=this.container.offsetWidth/r;o.style.transformOrigin="0px 0px",o.style.transform=`scale(${l})`}}}const Ye=n=>{let t=!1,e;return()=>t?e:(t=!0,e=n())};class ve{constructor(t){p(this,"wasmBin");p(this,"initOnce");if(typeof t!="function")throw new Error("initFn is not a function");this.initOnce=Ye(async()=>{await t(this.wasmBin)})}async init(t){this.wasmBin=t,await this.initOnce()}}class Nt{constructor(t){p(this,"hookedElem");p(this,"kModule");p(this,"opts");p(this,"modes",[]);p(this,"partialRendering",!0);p(this,"renderMode","svg");p(this,"r");p(this,"previewMode",0);p(this,"isContentPreview",!1);p(this,"isMixinOutline",!1);p(this,"backgroundColor","black");p(this,"pageColor","white");p(this,"pixelPerPt",3);p(this,"retrieveDOMState");p(this,"isRendering",!1);p(this,"moduleInitialized",!1);p(this,"patchQueue",[]);p(this,"disposeList",[]);p(this,"canvasRenderCToken");p(this,"currentRealScale",1);p(this,"currentScaleRatio",1);p(this,"vpTimeout");p(this,"sampledRenderTime",0);p(this,"partialRenderPage",0);p(this,"outline");p(this,"cursorPosition");p(this,"cachedDOMState",{width:0,height:0,window:{innerWidth:0,innerHeight:0},boundingRect:{left:0,top:0,right:0}});var e,r;this.hookedElem=t.hookedElem,this.kModule=t.kModule,this.opts=t||{};{const{renderMode:i,previewMode:o,isContentPreview:s,retrieveDOMState:u}=t||{};this.partialRendering=!1,this.renderMode=i??this.renderMode,this.previewMode=o??this.previewMode,this.isContentPreview=s||!1,this.retrieveDOMState=u??(()=>({width:this.hookedElem.offsetWidth,height:this.hookedElem.offsetHeight,window:{innerWidth:window.innerWidth,innerHeight:window.innerHeight},boundingRect:this.hookedElem.getBoundingClientRect()})),this.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--typst-preview-background-color")}this.hookedElem.classList.add("hide-scrollbar-x"),(e=this.hookedElem.parentElement)==null||e.classList.add("hide-scrollbar-x"),this.previewMode===1&&(this.hookedElem.classList.add("hide-scrollbar-y"),(r=this.hookedElem.parentElement)==null||r.classList.add("hide-scrollbar-y")),this.installCtrlWheelHandler()}reset(){this.kModule.reset(),this.moduleInitialized=!1}dispose(){const t=this.disposeList;this.disposeList=[],t.forEach(e=>e())}static derive(t,e){return["rescale","rerender","postRender"].reduce((r,i)=>(r[i]=t[`${i}$${e}`].bind(t),console.assert(r[i]!==void 0,`${i}$${e} is undefined`),r),{})}registerMode(t){const e=Nt.derive(this,t);this.modes.push([t,e]),t===this.renderMode&&(this.r=e)}installCtrlWheelHandler(){const t=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],e=r=>{var i,o,s,u;if(r.ctrlKey){r.preventDefault(),this.cachedDOMState=this.retrieveDOMState(),window.onresize!==null&&(window.onresize=null);const d=this.currentScaleRatio;if(r.deltaY<0){if(this.currentScaleRatio>=t.at(-1))return;this.currentScaleRatio=t.filter(R=>R>this.currentScaleRatio).at(0)}else if(r.deltaY>0){if(this.currentScaleRatio<=t.at(0))return;this.currentScaleRatio=t.filter(R=>R<this.currentScaleRatio).at(-1)}else return;const g=this.currentScaleRatio/d,l=r.pageX*(g-1),m=r.pageY*(g-1);Math.abs(this.currentScaleRatio-1)<1e-5?(this.hookedElem.classList.add("hide-scrollbar-x"),(i=this.hookedElem.parentElement)==null||i.classList.add("hide-scrollbar-x"),this.previewMode===1&&(this.hookedElem.classList.add("hide-scrollbar-y"),(o=this.hookedElem.parentElement)==null||o.classList.add("hide-scrollbar-y"))):(this.hookedElem.classList.remove("hide-scrollbar-x"),(s=this.hookedElem.parentElement)==null||s.classList.remove("hide-scrollbar-x"),this.previewMode===1&&(this.hookedElem.classList.remove("hide-scrollbar-y"),(u=this.hookedElem.parentElement)==null||u.classList.remove("hide-scrollbar-y")));const C=this.hookedElem.firstElementChild;if(C){const R=this.getSvgScaleRatio(),$=Number.parseFloat(C.getAttribute("data-height")),D=Math.ceil($*R);this.hookedElem.style.height=`${D*2}px`}return window.scrollBy(l,m),this.addViewportChange(),!1}};this.renderMode!=="dom"&&(typeof acquireVsCodeApi<"u"?(window.addEventListener("wheel",e,{passive:!1}),this.disposeList.push(()=>{window.removeEventListener("wheel",e)})):(document.body.addEventListener("wheel",e,{passive:!1}),this.disposeList.push(()=>{document.body.removeEventListener("wheel",e)})))}getSvgScaleRatio(){const t=this.hookedElem.firstElementChild;if(!t)return 0;const e=this.cachedDOMState,r=Number.parseFloat(t.getAttribute("data-width")||t.getAttribute("width")||"1"),i=Number.parseFloat(t.getAttribute("data-height")||t.getAttribute("height")||"1");return this.currentRealScale=this.previewMode===1?Math.min(e.width/r,e.height/i):e.width/r,this.currentRealScale*this.currentScaleRatio}processQueue(t){const e=t[0];switch(e){case"new":case"diff-v1":return e==="new"&&this.reset(),this.kModule.manipulateData({action:"merge",data:t[1]}),this.moduleInitialized=!0,!0;case"viewport-change":return this.moduleInitialized?!0:(console.log("viewport-change before initialization"),!1);default:return console.log("svgUpdateEvent",t),!1}}triggerUpdate(){if(this.isRendering)return;this.isRendering=!0;const t=async()=>{if(this.cachedDOMState=this.retrieveDOMState(),this.patchQueue.length===0){this.isRendering=!1,this.postprocessChanges();return}try{let e=performance.now();const r=this.canvasRenderCToken;r&&(await r.cancel(),await r.wait(),this.canvasRenderCToken=void 0,console.log("cancel canvas rendering"));let i=!1;for(;this.patchQueue.length>0;)i=this.processQueue(this.patchQueue.shift())||i;let o=performance.now();i&&(this.r.rescale(),await this.r.rerender(),this.r.rescale());let s=performance.now();const u=(d,g,l)=>`${d} ${(l-g).toFixed(2)} ms`;this.sampledRenderTime=s-e,requestAnimationFrame(t)}catch(e){console.error(e),this.isRendering=!1,this.postprocessChanges()}};requestAnimationFrame(t)}postprocessChanges(){this.r.postRender(),this.previewMode===1&&document.querySelectorAll(".typst-page-number-indicator").forEach(t=>{t.textContent=`${this.kModule.retrievePagesInfo().length}`})}addChangement(t){t[0]==="new"&&this.patchQueue.splice(0,this.patchQueue.length);const e=()=>{this.vpTimeout=void 0,this.patchQueue.push(t),this.triggerUpdate()};this.vpTimeout!==void 0&&clearTimeout(this.vpTimeout),t[0]==="viewport-change"&&this.isRendering?this.vpTimeout=setTimeout(e,this.sampledRenderTime||100):e()}addViewportChange(){this.addChangement(["viewport-change",""])}}function Ze(n){return class{constructor(e){p(this,"impl");p(this,"kModule");if(e.isContentPreview&&(e.renderMode="canvas"),this.kModule=e.kModule,this.impl=new n(e),!this.impl.r)throw new Error(`mode is not supported, ${e==null?void 0:e.renderMode}`);e.isContentPreview&&(this.impl.partialRendering=!0,this.impl.pixelPerPt=1,this.impl.isMixinOutline=!0)}dispose(){this.impl.dispose()}reset(){this.impl.reset()}addChangement(e){this.impl.addChangement(e)}addViewportChange(){this.impl.addViewportChange()}setPageColor(e){this.impl.pageColor=e,this.addViewportChange()}setPartialRendering(e){this.impl.partialRendering=e}setCursor(e,r,i){this.impl.cursorPosition=[e,r,i]}setPartialPageNumber(e){return e<=0||e>this.kModule.retrievePagesInfo().length?!1:(this.impl.partialRenderPage=e-1,this.addViewportChange(),!0)}getPartialPageNumber(){return this.impl.partialRenderPage+1}setOutineData(e){this.impl.outline=e,this.addViewportChange()}}}function tr(n,...t){return t.reduce((e,r)=>r(e),n)}class er{constructor(){p(this,"isCancellationRequested",!1);p(this,"_onCancelled");p(this,"_onCancelledResolveResolved");let t,e;this._onCancelled=new Promise(r=>{t=r,e&&e(r)}),this._onCancelledResolveResolved=new Promise(r=>{e=r,t&&r(t)})}async cancel(){await this._onCancelledResolveResolved,this.isCancellationRequested=!0}isCancelRequested(){return this.isCancellationRequested}async consume(){(await this._onCancelledResolveResolved)()}wait(){return this._onCancelled}}const rr=()=>new Promise(n=>requestAnimationFrame(n));function nr(n){return class extends n{constructor(...r){super(...r);p(this,"tmpl",document.createElement("template"));p(this,"stub",this.createElement("<stub></stub>"));p(this,"plugin");p(this,"docKernel");p(this,"resourceHeader");p(this,"pages",[]);p(this,"domScale",1);p(this,"track_mode",0);p(this,"current_task");p(this,"viewport");if(this.registerMode("dom"),this.disposeList.push(()=>{this.dispose()}),this.plugin=this.opts.renderer,this.opts.domScale!==void 0){if(this.opts.domScale<=0)throw new Error("domScale must be positive");this.domScale=this.opts.domScale}}dispose(){for(const r of this.pages)r.dispose();this.docKernel&&this.docKernel.free()}createElement(r){return this.tmpl.innerHTML=r,this.tmpl.content.firstElementChild}async mountDom(r){if(this.docKernel)throw new Error("already mounted");this.hookedElem.innerHTML='<svg class="typst-svg-resources" viewBox="0 0 0 0" width="0" height="0" style="opacity: 0; position: absolute;"></svg>',this.resourceHeader=this.hookedElem.querySelector(".typst-svg-resources"),this.docKernel=await this.plugin.renderer.mount_dom(this.kModule[x],this.hookedElem),this.docKernel.bind_functions({populateGlyphs:i=>{let s=this.createElement(i).firstElementChild;this.resourceHeader.append(s)}})}async cancelAnyway$dom(){if(this.current_task){const r=this.current_task;this.current_task=void 0,await r.cancel()}}retrieveDOMPages(){return Array.from(this.hookedElem.querySelectorAll(".typst-dom-page"))}postRender$dom(){}rescale$dom(){}getDomViewport(r,i){const o=i.left,s=-i.top,u=i.right,d=r.innerHeight-i.top,g={x:0,y:s/this.domScale,width:Math.max(u-o,0)/this.domScale,height:Math.max(d-s,0)/this.domScale};return(g.width<=0||g.height<=0)&&(g.x=g.y=g.width=g.height=0),g}async rerender$dom(){const r=this.retrieveDOMState(),{x:i,y:o,width:s,height:u}=this.getDomViewport(r.window,r.boundingRect);if(!await this.docKernel.relayout(i,o,s,u))return;const g=new er;this.doRender$dom(g),this.current_task=g}async doRender$dom(r){const i=(d,g)=>{if(d&&!r.isCancelRequested()&&g)return g()},o=this.retrieveDOMPages().map(d=>{const{innerWidth:g,innerHeight:l}=window,m=d.getBoundingClientRect();return{inWindow:!(m.left>g||m.right<0||m.top>l||m.bottom<0),page:d}}),s=async d=>{if(await rr(),r.isCancelRequested())return;const g=o[d].page,l=g.getBoundingClientRect(),m=this.getDomViewport(window,l),C=z=>this.docKernel.need_repaint(d,m.x,m.y,m.width,m.height,z),R=z=>this.docKernel.repaint(d,m.x,m.y,m.width,m.height,z),$=z=>{if(!r.isCancelRequested())return i(C(z),()=>R(z))};await $(0);const D=(l.width?Number.parseFloat(g.getAttribute("data-width"))/l.width:1)*this.domScale,B=(l.height?Number.parseFloat(g.getAttribute("data-height"))/l.height:1)*this.domScale;m.x*=D,m.y*=B,m.y-=100,m.width*=D,m.height*=B,m.height+=200,await $(1),await $(2),!r.isCancelRequested()&&(C(3)?(async()=>{if(await R(3),!r.isCancelRequested())return $(4)})():await $(4))},u=async d=>{for(let g=0;g<o.length;++g){if(r.isCancelRequested())return;o[g].inWindow===d&&await s(g)}};this.cancelAnyway$dom(),await u(!0),await u(!1),r.isCancelRequested()}}}class ir extends Ze(tr(Nt,nr)){}var le;let Rt=(le=x,class{constructor(t,e){p(this,le);this.plugin=t,this[x]=e}set backgroundColor(t){t!==void 0&&(this[x].background_color=t)}get backgroundColor(){return this[x].background_color}set pixelPerPt(t){t!==void 0&&(this[x].pixel_per_pt=t)}get pixelPerPt(){return this[x].pixel_per_pt}reset(){this.plugin.resetSession(this)}get doc_width(){return this[x].doc_width}get docWidth(){return this[x].doc_width}get doc_height(){return this[x].doc_height}get docHeight(){return this[x].doc_height}retrievePagesInfo(){const t=this[x].pages_info,e=[],r=t.page_count;for(let i=0;i<r;i++){const o=t.page(i);e.push({pageOffset:o.page_off,width:o.width_pt,height:o.height_pt})}return e}getSourceLoc(t){return this[x].source_span(t)}renderSvg(t){return this.plugin.renderSvg({renderSession:this,...t})}renderToSvg(t){return this.plugin.renderToSvg({renderSession:this,...t})}renderCanvas(t){return this.plugin.renderCanvas({renderSession:this,...t})}manipulateData(t){this.plugin.manipulateData({renderSession:this,...t})}renderSvgDiff(t){return this.plugin.renderSvgDiff({renderSession:this,...t})}get_source_loc(t){return this[x].source_span(t)}render_in_window(t,e,r,i){return this[x].render_in_window(t,e,r,i)}merge_delta(t){this.plugin.manipulateData({renderSession:this,action:"merge",data:t})}});var we;let or=(we=x,class{constructor(t,e){p(this,we);p(this,"managedCanvasElemList",new Map);p(this,"canvasCounter",Math.random());this.plugin=t,this[x]=e}manipulateData(t,e){return this[x].manipulate_data(t,e)}renderCanvas(t){const e=this.managedCanvasElemList;for(const[u,d]of e)d[0]=0;for(const u of t){const d=u.canvas;let g=d.dataset.manageId,l=2;g||(g=this.canvasCounter.toFixed(5),this.canvasCounter+=1,d.dataset.manageId=g,l=1);let m=e.get(g);if(m&&m[0]!==0)throw new Error("cannot update a canvas for two times in batch");e.set(g,[l,{...u}])}const r=Array.from(e.entries()),i=new Uint8Array(r.length),o=new Array(r.length),s=r.map(([u,[d,g]],l)=>(d||e.delete(u),i[l]=d,o[l]=g.canvas,this.plugin.canvasOptionsToRust(g)));return this[x].render_canvas(i,o,s)}async retrievePagesInfo(){const t=await this[x].get_pages_info();console.log(t);const e=[],r=t.page_count;for(let i=0;i<r;i++){const o=t.page(i);e.push({pageOffset:o.page_off,width:o.width_pt,height:o.height_pt})}return e}});const sr=n=>new ve(async t=>await n.default(t));function Tt(){return new ar}async function _r(){return(await Promise.resolve().then(()=>Fe)).renderer_build_info()}let Jt=!0;class ar{constructor(){p(this,"renderer");p(this,"rendererJs")}async init(t){var r;this.rendererJs=await(((r=t==null?void 0:t.getWrapper)==null?void 0:r.call(t))||Promise.resolve().then(()=>Fe));const e=this.rendererJs.TypstRendererBuilder;this.renderer=await he(t,sr(this.rendererJs),e,{})}loadGlyphPack(t){return Promise.resolve()}createOptionsToRust(t){const e=new this.rendererJs.CreateSessionOptions;return t.format!==void 0&&(e.format=t.format),t.artifactContent!==void 0&&(e.artifact_content=t.artifactContent),e}canvasOptionsToRust(t){const e=new this.rendererJs.RenderPageImageOptions;if(t.pageOffset===void 0)throw new Error("pageOffset is required in reflexo v0.5.0");if(e.page_off=t.pageOffset,t.cacheKey!==void 0&&(e.cache_key=t.cacheKey),t.backgroundColor!==void 0&&(e.background_color=t.backgroundColor),t.pixelPerPt!==void 0&&(e.pixel_per_pt=t.pixelPerPt),t.dataSelection!==void 0){let r=0;t.dataSelection.body?r|=1:t.canvas&&Jt&&(Jt=!1,console.warn("dataSelection.body is not set but providing canvas for body")),(t.dataSelection.text||t.dataSelection.annotation)&&console.error("dataSelection.text and dataSelection.annotation are deprecated"),t.dataSelection.semantics&&(r|=8),e.data_selection=r}return e}retrievePagesInfoFromSession(t){return t.retrievePagesInfo()}renderCanvas(t){return this.withinOptionSession(t,async e=>this.renderer.render_page_to_canvas(e[x],t.canvas||void 0,this.canvasOptionsToRust(t)))}async inAnimationFrame(t){return new Promise((e,r)=>{requestAnimationFrame(()=>{try{e(t())}catch(i){r(i)}})})}async renderDisplayLayer(t,e,r){const o=t[x].pages_info.page_count,s=async(l,m)=>{const R=e[l].getContext("2d");if(!R)throw new Error("canvas context is null");return await this.renderCanvas({...r,canvas:R,renderSession:t,pageOffset:m})},u=performance.now(),d=await(async()=>{const l=[];for(let m=0;m<o;m++)l.push(await this.inAnimationFrame(()=>s(m,m)));return l})(),g=performance.now();return console.log(`display layer used: render = ${(g-u).toFixed(1)}ms`),d}renderTextLayer(t,e){const r=performance.now();t.forEach((o,s)=>{o.innerHTML=e[s].htmlSemantics[0]});const i=performance.now();console.log(`text layer used: render = ${(i-r).toFixed(1)}ms`)}async render(t){if("format"in t&&t.format!=="vector"&&["serde_json","js","ir"].includes(t.format))throw new Error(`deprecated format ${t.format}, please use vector format`);return this.renderToCanvas(t)}async renderDom(t){if("format"in t&&t.format!=="vector"&&["serde_json","js","ir"].includes(t.format))throw new Error(`deprecated format ${t.format}, please use vector format`);return this.withinOptionSession(t,async e=>{const r=new ir({...t,renderMode:"dom",hookedElem:t.container,kModule:e,renderer:this});return await r.impl.mountDom(t.pixelPerPt),r})}async renderToCanvas(t){let e,r;const i=t.container;i.style.visibility="hidden";const o=async(s,u)=>{try{r=await this.renderDisplayLayer(e,s,t),u()}finally{i.style.visibility="visible"}};return this.withinOptionSession(t,async s=>{if(e=s,e[x].pages_info.page_count===0)throw new Error("No page found in session");if(t.pixelPerPt!==void 0&&t.pixelPerPt<=0)throw new Error("Invalid typst.RenderOptions.pixelPerPt, should be a positive number "+t.pixelPerPt);let u=t.backgroundColor;if(u!==void 0&&!/^#[0-9a-f]{6}$/.test(u))throw new Error("Invalid typst.backgroundColor color for matching ^#?[0-9a-f]{6}$ "+u);e.pixelPerPt=t.pixelPerPt??qt.PIXEL_PER_PT,e.backgroundColor=u??"#ffffff";const d=performance.now(),g=new ye(this.retrievePagesInfoFromSession(e),i,t),l=performance.now();console.log(`layer used: retrieve = ${(l-d).toFixed(1)}ms`),await o(g.canvasList,()=>g.resetLayout()),this.renderTextLayer(g.textLayerList,r)})}createModule(t){return Promise.resolve(new Rt(this,this.renderer.create_session(t&&this.createOptionsToRust({format:"vector",artifactContent:t}))))}async createWorkerV0(t){return new or(this,await this.renderer.create_worker(t))}workerBridge(){return this.renderer.create_worker_bridge()}renderSvg(t,e){if(t instanceof Rt||e)throw new Error("removed api, please use renderToSvg({ renderSession, container }) instead");return this.withinOptionSession(t,async r=>{let i;return t.data_selection&&(i=0,t.data_selection.body&&(i|=1),t.data_selection.defs&&(i|=2),t.data_selection.css&&(i|=4),t.data_selection.js&&(i|=8)),Promise.resolve(this.renderer.svg_data(r[x],i))})}renderSvgDiff(t){return t.window?this.renderer.render_svg_diff(t.renderSession[x],t.window.lo.x,t.window.lo.y,t.window.hi.x,t.window.hi.y):this.renderer.render_svg_diff(t.renderSession[x],0,0,1e33,1e33)}renderToSvg(t){return this.withinOptionSession(t,async e=>Promise.resolve(this.renderer.render_svg(e[x],t.container)))}getCustomV1(t){return Promise.resolve(this.renderer.get_customs(t.renderSession[x]))}resetSession(t){return this.renderer.reset(t[x])}manipulateData(t){return this.renderer.manipulate_data(t.renderSession[x],t.action??"reset",t.data)}withinOptionSession(t,e){function r(i){return"artifactContent"in i}if("renderSession"in t)return e(t.renderSession);if(r(t))return this.runWithSession(t,e);throw new Error("Invalid render options, should be one of RenderByContentOptions|RenderBySessionOptions")}async runWithSession(t,e){let r=t,i=e;e||(r=void 0,i=t);const o=this.renderer.create_session(r&&this.createOptionsToRust(r));try{const s=await i(new Rt(this,o));return o.free(),s}catch(s){throw o.free(),s}}}var be;be=x;class cr{constructor(t){p(this,be);this[x]=t}reset(){this[x].reset()}current(){return this[x].current()}setAttachDebugInfo(t){this[x].set_attach_debug_info(t)}}function ur(){return new gr}var pe;pe=x;class dr{constructor(t){p(this,pe);this[x]=t}compile(t){return this[x].compile(0,tt(t==null?void 0:t.diagnostics))}compileHtml(t){return this[x].compile(1,tt(t==null?void 0:t.diagnostics))}async query(t){return JSON.parse(this[x].query(0,t.selector,t.field))}title(){return this[x].title(0)}vector(t){return this[x].get_artifact(0,tt(t==null?void 0:t.diagnostics))||{}}pdf(t){return this[x].get_artifact(1,tt(t==null?void 0:t.diagnostics))||{}}}const Se=n=>new ve(async t=>await n.default(t));function Ht(){return new St}class gr{constructor(){p(this,"fontBuilderJs");p(this,"fontBuilder")}async init(t){var e,r;this.fontBuilderJs=await(((e=t==null?void 0:t.getWrapper)==null?void 0:e.call(t))||Promise.resolve().then(()=>De)),await Se(this.fontBuilderJs).init((r=t==null?void 0:t.getModule)==null?void 0:r.call(t)),this.fontBuilder=new this.fontBuilderJs.TypstFontResolverBuilder}async getFontInfo(t){return this.fontBuilder.get_font_info(t)}async addFontData(t){this.fontBuilder.add_raw_font(t)}async addLazyFont(t,e){return this.fontBuilder.add_lazy_font(t,e)}async build(t){const e=await this.fontBuilder.build(),r=await t(e);return e.free(),r}}const Et=class Et{constructor(){p(this,"compiler");p(this,"compilerJs")}async init(t){var g;this.compilerJs=await(((g=t==null?void 0:t.getWrapper)==null?void 0:g.call(t))||Promise.resolve().then(()=>De));const e=this.compilerJs.TypstCompilerBuilder,r={...t||{}},i=r.beforeBuild??(r.beforeBuild=[]),o=i.some(l=>l._preloadRemoteFontOptions!==void 0),s=i.some(l=>{var m;return((m=l._preloadRemoteFontOptions)==null?void 0:m.assets)!==void 0}),u=i.some(l=>{var m;return((m=l._preloadRemoteFontOptions)==null?void 0:m.assets)===!1});if((!o||!s&&!u)&&i.push(X([],{assets:Et.defaultAssets})),!i.some(l=>l._kind==="fontLoader"))throw new Error("TypstCompiler: no font loader found, please use font loaders, e.g. loadFonts or preloadSystemFonts");this.compiler=await he(t,Se(this.compilerJs),e,{})}setFonts(t){this.compiler.set_fonts(t)}compile(t){return new Promise(e=>{const r=this.compiler.snapshot(t.root,t.mainFilePath,Vt(t.inputs));if("incrementalServer"in t){e(r.incr_compile(t.incrementalServer[x],tt(t.diagnostics)));return}e(r.get_artifact(t.format||0,tt(t.diagnostics)))})}async runWithWorld(t,e){const r=this.compiler.snapshot(t.root,t.mainFilePath,Vt(t.inputs));let i=await e(new dr(r));return r.free(),i}query(t){return this.runWithWorld(t,async e=>JSON.parse(await e.query(t)))}getSemanticTokenLegend(){return new Promise(t=>{t(this.compiler.get_semantic_token_legend())})}getSemanticTokens(t){return new Promise(e=>{this.compiler.reset(),e(this.compiler.get_semantic_tokens(t.offsetEncoding||"utf-16",t.mainFilePath,t.resultId))})}async withIncrementalServer(t){const e=new cr(this.compiler.create_incr_server());try{return await t(e)}finally{e[x].free()}}async getAst(t){return this.compiler.get_ast(t)}async reset(){await new Promise(t=>{this.compiler.reset(),t(void 0)})}addSource(t,e){if(arguments.length>2)throw new Error("use of addSource(path, source, isMain) is deprecated, please use addSource(path, source) instead");this.compiler.add_source(t,e)}mapShadow(t,e){this.compiler.map_shadow(t,e)}unmapShadow(t){this.compiler.unmap_shadow(t)}resetShadow(){this.compiler.reset_shadow()}renderPageToCanvas(){throw new Error("Please use the api TypstRenderer.renderToCanvas in v0.4.0")}};p(Et,"defaultAssets",["text"]);let St=Et;Ht._impl=St;function Vt(n){return n?Object.entries(n):void 0}function tt(n){switch(n){case"none":return 1;case"unix":return 2;case"full":default:return 3}}class Ie{constructor(t,e){p(this,"fullyCached");p(this,"mTimes",new Map);p(this,"mRealPaths",new Map);p(this,"mData",new Map);this.root=t,t.endsWith("/")&&(this.root=this.root.slice(0,this.root.length-1)),e!=null&&e.polyfillHeadRequest,this.fullyCached=!!(e!=null&&e.fullyCached)}reset(){this.mTimes.clear(),this.mRealPaths.clear(),this.mData.clear()}resolvePath(t){return this.root+t}insertFile(t,e,r){this.mTimes.set(t,r),this.mData.set(t,e)}removeFile(t){this.mTimes.delete(t),this.mData.delete(t)}async getPreloadScript(){const t=[];t.push("((async () => {"),t.push("const snapshot = {  root: '', mTimes: new Map(),  mRealPaths: new Map(),  mData: [],};"),t.push("const runFetch = async (path) => {"),t.push("  const res = await fetch(snapshot.root + path);"),t.push("  const buffer = await res.arrayBuffer();"),t.push("  return [path, new Uint8Array(buffer)];"),t.push("};"),t.push(`snapshot.root = ${JSON.stringify(this.root)};`),t.push(`snapshot.mTimes = new Map([${[...this.mTimes.entries()].map(([r,i])=>`[${JSON.stringify(r)}, ${(i==null?void 0:i.getTime())||"undefined"}]`).join(", ")}]);`),t.push(`snapshot.mRealPaths = new Map([${[...this.mRealPaths.entries()].map(([r,i])=>`[${JSON.stringify(r)}, ${JSON.stringify(i)}]`).join(", ")}]);`);const e=await Promise.all([...this.mData.entries()].map(async([r,i])=>(r=JSON.stringify(r),i?`runFetch(${r})`:`Promise.resolve([${r}, undefined])`)));return t.push(`snapshot.mData = await Promise.all([${e.join(", ")}]);`),t.push("return snapshot;"),t.push("})())"),t.join(`
`)}getLastModified(t){const e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(null),e.status===200?e.getResponseHeader("Last-Modified"):null}getMTimeInternal(t){const e=this.getLastModified(this.resolvePath(t));if(e)return new Date(e)}getMTime(t){if(t.startsWith("/@memory/"))return this.mTimes.has(t)?this.mTimes.get(t):void 0;if(!this.fullyCached)return this.getMTimeInternal(t);if(this.mTimes.has(t))return this.mTimes.get(t);const e=this.getMTimeInternal(t);return this.mTimes.set(t,e),e}isFile(){return!0}getRealPath(t){return t}readAllInternal(t){const e=new XMLHttpRequest;if(e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("GET",this.resolvePath(t),!1),e.send(null),e.status===200&&(e.response instanceof String||typeof e.response=="string"))return Uint8Array.from(e.response,r=>r.charCodeAt(0))}readAll(t){if(t.startsWith("/@memory/"))return this.mData.has(t)?this.mData.get(t):void 0;if(!this.fullyCached)return this.readAllInternal(t);if(this.mData.has(t))return this.mData.get(t);const e=this.readAllInternal(t);return this.mData.set(t,e),e}}class fr{constructor(){p(this,"mTimes",new Map);p(this,"mData",new Map)}reset(){this.mTimes.clear(),this.mData.clear()}insertFile(t,e,r){this.mTimes.set(t,r),this.mData.set(t,e)}removeFile(t){this.mTimes.delete(t),this.mData.delete(t)}getMTime(t){if(t.startsWith("/@memory/")&&this.mTimes.has(t))return this.mTimes.get(t)}isFile(){return!0}getRealPath(t){return t}readAll(t){if(t.startsWith("/@memory/")&&this.mData.has(t))return this.mData.get(t)}}class xe{constructor(t){p(this,"cache",new Map);this.am=t}resolvePath(t){return`https://packages.typst.org/preview/${t.name}-${t.version}.tar.gz`}pullPackageData(t){const e=new XMLHttpRequest;if(e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("GET",this.resolvePath(t),!1),e.send(null),e.status===200&&(e.response instanceof String||typeof e.response=="string"))return Uint8Array.from(e.response,r=>r.charCodeAt(0))}resolve(t,e){if(t.namespace!=="preview")return;const r=this.resolvePath(t);if(this.cache.has(r))return this.cache.get(r)();const i=this.pullPackageData(t);if(!i)return;const o=`/@memory/fetch/packages/preview/${t.namespace}/${t.name}/${t.version}`,s=[];e.untar(i,(d,g,l)=>{s.push([o+"/"+d,g,new Date(l)])});const u=()=>{for(const[d,g,l]of s)this.am.insertFile(d,g,l);return o};return this.cache.set(r,u),u()}}typeof window<"u"&&(window.TypstRenderModule={RenderView:ye,createTypstRenderer:Tt,createTypstSvgRenderer:Tt,preloadRemoteFonts:X,loadFonts:X,preloadSystemFonts:Pt},window.TypstCompileModule={createTypstCompiler:Ht,createTypstFontBuilder:ur,preloadRemoteFonts:X,loadFonts:X,loadFontSync:me,preloadSystemFonts:Pt,FetchAccessModel:Ie,MemoryAccessModel:fr,FetchPackageRegistry:xe,withAccessModel:Qe,withPackageRegistry:Ke});let _,N=new Array(128).fill(void 0);N.push(void 0,null,!0,!1);function c(n){return N[n]}let et=N.length;function v(n){et===N.length&&N.push(N.length+1);const t=et;if(et=N[t],typeof et!="number")throw new Error("corrupt heap");return N[t]=n,t}function k(n,t){try{return n.apply(this,t)}catch(e){_.__wbindgen_export_0(v(e))}}function f(n,t){try{return n.apply(this,t)}catch(e){let r=function(){try{return e instanceof Error?`${e.message}

Stack:
${e.stack}`:e.toString()}catch{return"<failed to stringify thrown value>"}}();throw console.error("wasm-bindgen: imported JS function that was not marked as `catch` threw an error:",r),e}}function b(n){if(typeof n!="number")throw new Error(`expected a number argument, found ${typeof n}`)}let gt=null;function nt(){return(gt===null||gt.byteLength===0)&&(gt=new Uint8Array(_.memory.buffer)),gt}let yt=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});yt.decode();const lr=2146435072;let At=0;function wr(n,t){return At+=t,At>=lr&&(yt=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),yt.decode(),At=t),yt.decode(nt().subarray(n,n+t))}function E(n,t){return n=n>>>0,wr(n,t)}let P=0;const bt=new TextEncoder;"encodeInto"in bt||(bt.encodeInto=function(n,t){const e=bt.encode(n);return t.set(e),{read:n.length,written:e.length}});function j(n,t,e){if(typeof n!="string")throw new Error(`expected a string argument, found ${typeof n}`);if(e===void 0){const u=bt.encode(n),d=t(u.length,1)>>>0;return nt().subarray(d,d+u.length).set(u),P=u.length,d}let r=n.length,i=t(r,1)>>>0;const o=nt();let s=0;for(;s<r;s++){const u=n.charCodeAt(s);if(u>127)break;o[i+s]=u}if(s!==r){s!==0&&(n=n.slice(s)),i=e(i,r,r=s+n.length*3,1)>>>0;const u=nt().subarray(i+s,i+r),d=bt.encodeInto(n,u);if(d.read!==n.length)throw new Error("failed to pass whole string");s+=d.written,i=e(i,r,s,1)>>>0}return P=s,i}let V=null;function h(){return(V===null||V.buffer.detached===!0||V.buffer.detached===void 0&&V.buffer!==_.memory.buffer)&&(V=new DataView(_.memory.buffer)),V}function M(n){return n==null}function L(n){if(typeof n!="boolean")throw new Error(`expected a boolean argument, found ${typeof n}`)}function Gt(n,t){return n=n>>>0,nt().subarray(n/1,n/1+t)}function br(n){n<132||(N[n]=et,et=n)}function F(n){const t=c(n);return br(n),t}function Ot(n){const t=typeof n;if(t=="number"||t=="boolean"||n==null)return`${n}`;if(t=="string")return`"${n}"`;if(t=="symbol"){const i=n.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=n.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(n)){const i=n.length;let o="[";i>0&&(o+=Ot(n[0]));for(let s=1;s<i;s++)o+=", "+Ot(n[s]);return o+="]",o}const e=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(e&&e.length>1)r=e[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}const It=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>{_.__wbindgen_export_4.get(n.dtor)(n.a,n.b)});function Xt(n,t,e,r){const i={a:n,b:t,cnt:1,dtor:e},o=(...s)=>{i.cnt++;try{return r(i.a,i.b,...s)}finally{--i.cnt===0&&(_.__wbindgen_export_4.get(i.dtor)(i.a,i.b),i.a=0,It.unregister(i))}};return o.original=i,It.register(o,i,i),o}function pr(n,t,e,r){const i={a:n,b:t,cnt:1,dtor:e},o=(...s)=>{i.cnt++;const u=i.a;i.a=0;try{return r(u,i.b,...s)}finally{--i.cnt===0?(_.__wbindgen_export_4.get(i.dtor)(u,i.b),It.unregister(i)):i.a=u}};return o.original=i,It.register(o,i,i),o}function hr(){const n=_.renderer_build_info();return F(n)}function q(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`)}function xt(n,t){const e=t(n.length*1,1)>>>0;return nt().set(n,e/1),P=n.length,e}let ft=null;function mr(){return(ft===null||ft.byteLength===0)&&(ft=new Uint32Array(_.memory.buffer)),ft}function yr(n,t){const e=t(n.length*4,4)>>>0;return mr().set(n,e/4),P=n.length,e}function Kt(n,t){const e=t(n.length*4,4)>>>0,r=h();for(let i=0;i<n.length;i++)r.setUint32(e+4*i,v(n[i]),!0);return P=n.length,e}function vr(n,t,e){b(n),b(t),_.__wbindgen_export_5(n,t,v(e))}function Sr(n,t){b(n),b(t),_.__wbindgen_export_6(n,t)}function Ir(n,t,e){b(n),b(t),_.__wbindgen_export_7(n,t,v(e))}function xr(n,t,e,r){b(n),b(t),_.__wbindgen_export_8(n,t,v(e),v(r))}const Qt=["nonzero","evenodd"],Yt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_createsessionoptions_free(n>>>0,1));class kt{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Yt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_createsessionoptions_free(t,0)}constructor(){const t=_.createsessionoptions_new();return this.__wbg_ptr=t>>>0,Yt.register(this,this.__wbg_ptr,this),this}set format(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const e=j(t,_.__wbindgen_export_1,_.__wbindgen_export_2),r=P;_.createsessionoptions_set_format(this.__wbg_ptr,e,r)}set artifact_content(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const e=xt(t,_.__wbindgen_export_1),r=P;_.createsessionoptions_set_artifact_content(this.__wbg_ptr,e,r)}}Symbol.dispose&&(kt.prototype[Symbol.dispose]=kt.prototype.free);const Zt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_incrdomdocclient_free(n>>>0,1));class ot{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t=t>>>0;const e=Object.create(ot.prototype);return e.__wbg_ptr=t,Zt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Zt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_incrdomdocclient_free(t,0)}bind_functions(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr),_.incrdomdocclient_bind_functions(this.__wbg_ptr,v(t))}relayout(t,e,r,i){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const o=_.incrdomdocclient_relayout(this.__wbg_ptr,t,e,r,i);return F(o)}need_repaint(t,e,r,i,o,s){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const l=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr),b(t),b(s),_.incrdomdocclient_need_repaint(l,this.__wbg_ptr,t,e,r,i,o,s);var u=h().getInt32(l+0,!0),d=h().getInt32(l+4,!0),g=h().getInt32(l+8,!0);if(g)throw F(d);return u!==0}finally{_.__wbindgen_add_to_stack_pointer(16)}}repaint(t,e,r,i,o,s){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const l=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr),b(t),b(s),_.incrdomdocclient_repaint(l,this.__wbg_ptr,t,e,r,i,o,s);var u=h().getInt32(l+0,!0),d=h().getInt32(l+4,!0),g=h().getInt32(l+8,!0);if(g)throw F(d);return F(u)}finally{_.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(ot.prototype[Symbol.dispose]=ot.prototype.free);const te=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_pageinfo_free(n>>>0,1));class K{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t=t>>>0;const e=Object.create(K.prototype);return e.__wbg_ptr=t,te.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,te.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_pageinfo_free(t,0)}get page_off(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return b(this.__wbg_ptr),_.pageinfo_page_off(this.__wbg_ptr)>>>0}get width_pt(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return b(this.__wbg_ptr),_.pageinfo_width_pt(this.__wbg_ptr)}get height_pt(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return b(this.__wbg_ptr),_.pageinfo_height_pt(this.__wbg_ptr)}}Symbol.dispose&&(K.prototype[Symbol.dispose]=K.prototype.free);const ee=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_pagesinfo_free(n>>>0,1));class st{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t=t>>>0;const e=Object.create(st.prototype);return e.__wbg_ptr=t,ee.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ee.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_pagesinfo_free(t,0)}get page_count(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return b(this.__wbg_ptr),_.pagesinfo_page_count(this.__wbg_ptr)>>>0}page_by_number(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr),b(t);const e=_.pagesinfo_page_by_number(this.__wbg_ptr,t);return e===0?void 0:K.__wrap(e)}page(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr),b(t);const e=_.pagesinfo_page(this.__wbg_ptr,t);return K.__wrap(e)}width(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return b(this.__wbg_ptr),_.pagesinfo_width(this.__wbg_ptr)}height(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return b(this.__wbg_ptr),_.pagesinfo_height(this.__wbg_ptr)}}Symbol.dispose&&(st.prototype[Symbol.dispose]=st.prototype.free);const re=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_renderpageimageoptions_free(n>>>0,1));class Q{static __unwrap(t){return t instanceof Q?t.__destroy_into_raw():0}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,re.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_renderpageimageoptions_free(t,0)}constructor(){const t=_.renderpageimageoptions_new();return this.__wbg_ptr=t>>>0,re.register(this,this.__wbg_ptr,this),this}get pixel_per_pt(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const t=_.renderpageimageoptions_pixel_per_pt(this.__wbg_ptr);return t===4294967297?void 0:t}set pixel_per_pt(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr),M(t)||b(t),_.renderpageimageoptions_set_pixel_per_pt(this.__wbg_ptr,M(t)?4294967297:Math.fround(t))}get background_color(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr),_.renderpageimageoptions_background_color(r,this.__wbg_ptr);var t=h().getInt32(r+0,!0),e=h().getInt32(r+4,!0);let i;return t!==0&&(i=E(t,e).slice(),_.__wbindgen_export_3(t,e*1,1)),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}set background_color(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);var e=M(t)?0:j(t,_.__wbindgen_export_1,_.__wbindgen_export_2),r=P;_.renderpageimageoptions_set_background_color(this.__wbg_ptr,e,r)}get page_off(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return b(this.__wbg_ptr),_.renderpageimageoptions_page_off(this.__wbg_ptr)>>>0}set page_off(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr),b(t),_.renderpageimageoptions_set_page_off(this.__wbg_ptr,t)}get cache_key(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr),_.renderpageimageoptions_cache_key(r,this.__wbg_ptr);var t=h().getInt32(r+0,!0),e=h().getInt32(r+4,!0);let i;return t!==0&&(i=E(t,e).slice(),_.__wbindgen_export_3(t,e*1,1)),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}set cache_key(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);var e=M(t)?0:j(t,_.__wbindgen_export_1,_.__wbindgen_export_2),r=P;_.renderpageimageoptions_set_cache_key(this.__wbg_ptr,e,r)}get data_selection(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const t=_.renderpageimageoptions_data_selection(this.__wbg_ptr);return t===4294967297?void 0:t}set data_selection(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr),M(t)||b(t),_.renderpageimageoptions_set_data_selection(this.__wbg_ptr,M(t)?4294967297:t>>>0)}}Symbol.dispose&&(Q.prototype[Symbol.dispose]=Q.prototype.free);const ne=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_rendersession_free(n>>>0,1));class W{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t=t>>>0;const e=Object.create(W.prototype);return e.__wbg_ptr=t,ne.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ne.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_rendersession_free(t,0)}get pixel_per_pt(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const t=_.rendersession_pixel_per_pt(this.__wbg_ptr);return t===4294967297?void 0:t}set pixel_per_pt(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr),M(t)||b(t),_.rendersession_set_pixel_per_pt(this.__wbg_ptr,M(t)?4294967297:Math.fround(t))}get background_color(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr),_.rendersession_background_color(r,this.__wbg_ptr);var t=h().getInt32(r+0,!0),e=h().getInt32(r+4,!0);let i;return t!==0&&(i=E(t,e).slice(),_.__wbindgen_export_3(t,e*1,1)),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}set background_color(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);var e=M(t)?0:j(t,_.__wbindgen_export_1,_.__wbindgen_export_2),r=P;_.rendersession_set_background_color(this.__wbg_ptr,e,r)}get pages_info(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const t=_.rendersession_pages_info(this.__wbg_ptr);return st.__wrap(t)}get doc_width(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return b(this.__wbg_ptr),_.rendersession_doc_width(this.__wbg_ptr)}get doc_height(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return b(this.__wbg_ptr),_.rendersession_doc_height(this.__wbg_ptr)}source_span(t){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const s=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr);const u=yr(t,_.__wbindgen_export_1),d=P;_.rendersession_source_span(s,this.__wbg_ptr,u,d);var e=h().getInt32(s+0,!0),r=h().getInt32(s+4,!0),i=h().getInt32(s+8,!0),o=h().getInt32(s+12,!0);if(o)throw F(i);let g;return e!==0&&(g=E(e,r).slice(),_.__wbindgen_export_3(e,r*1,1)),g}finally{_.__wbindgen_add_to_stack_pointer(16)}}render_in_window(t,e,r,i){let o,s;try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const g=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr),_.rendersession_render_in_window(g,this.__wbg_ptr,t,e,r,i);var u=h().getInt32(g+0,!0),d=h().getInt32(g+4,!0);return o=u,s=d,E(u,d)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_3(o,s,1)}}}Symbol.dispose&&(W.prototype[Symbol.dispose]=W.prototype.free);const ie=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_rendersessionoptions_free(n>>>0,1));class Lt{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ie.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_rendersessionoptions_free(t,0)}constructor(){const t=_.rendersessionoptions_new();return this.__wbg_ptr=t>>>0,ie.register(this,this.__wbg_ptr,this),this}get pixel_per_pt(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const t=_.rendersession_pixel_per_pt(this.__wbg_ptr);return t===4294967297?void 0:t}set pixel_per_pt(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr),M(t)||b(t),_.rendersession_set_pixel_per_pt(this.__wbg_ptr,M(t)?4294967297:Math.fround(t))}get background_color(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr),_.rendersessionoptions_background_color(r,this.__wbg_ptr);var t=h().getInt32(r+0,!0),e=h().getInt32(r+4,!0);let i;return t!==0&&(i=E(t,e).slice(),_.__wbindgen_export_3(t,e*1,1)),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}set background_color(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);var e=M(t)?0:j(t,_.__wbindgen_export_1,_.__wbindgen_export_2),r=P;_.rendersessionoptions_set_background_color(this.__wbg_ptr,e,r)}get format(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr),_.rendersessionoptions_format(r,this.__wbg_ptr);var t=h().getInt32(r+0,!0),e=h().getInt32(r+4,!0);let i;return t!==0&&(i=E(t,e).slice(),_.__wbindgen_export_3(t,e*1,1)),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}set format(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);var e=M(t)?0:j(t,_.__wbindgen_export_1,_.__wbindgen_export_2),r=P;_.rendersessionoptions_set_format(this.__wbg_ptr,e,r)}}Symbol.dispose&&(Lt.prototype[Symbol.dispose]=Lt.prototype.free);const Ct=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_typstrenderer_free(n>>>0,1));class _t{static __wrap(t){t=t>>>0;const e=Object.create(_t.prototype);return e.__wbg_ptr=t,Ct.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Ct.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_typstrenderer_free(t,0)}constructor(){const t=_.typstrenderer_new();return this.__wbg_ptr=t>>>0,Ct.register(this,this.__wbg_ptr,this),this}create_session(t){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const o=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr);let s=0;if(!M(t)){if(q(t,kt),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");s=t.__destroy_into_raw()}_.typstrenderer_create_session(o,this.__wbg_ptr,s);var e=h().getInt32(o+0,!0),r=h().getInt32(o+4,!0),i=h().getInt32(o+8,!0);if(i)throw F(r);return W.__wrap(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}reset(t){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const i=_.__wbindgen_add_to_stack_pointer(-16);if(b(this.__wbg_ptr),q(t,W),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");_.typstrenderer_reset(i,this.__wbg_ptr,t.__wbg_ptr);var e=h().getInt32(i+0,!0),r=h().getInt32(i+4,!0);if(r)throw F(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}manipulate_data(t,e,r){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const s=_.__wbindgen_add_to_stack_pointer(-16);if(b(this.__wbg_ptr),q(t,W),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");const u=j(e,_.__wbindgen_export_1,_.__wbindgen_export_2),d=P,g=xt(r,_.__wbindgen_export_1),l=P;_.typstrenderer_manipulate_data(s,this.__wbg_ptr,t.__wbg_ptr,u,d,g,l);var i=h().getInt32(s+0,!0),o=h().getInt32(s+4,!0);if(o)throw F(i)}finally{_.__wbindgen_add_to_stack_pointer(16)}}session_from_artifact(t,e){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const s=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr);const u=xt(t,_.__wbindgen_export_1),d=P,g=j(e,_.__wbindgen_export_1,_.__wbindgen_export_2),l=P;_.typstrenderer_session_from_artifact(s,this.__wbg_ptr,u,d,g,l);var r=h().getInt32(s+0,!0),i=h().getInt32(s+4,!0),o=h().getInt32(s+8,!0);if(o)throw F(i);return W.__wrap(r)}finally{_.__wbindgen_add_to_stack_pointer(16)}}load_glyph_pack(t){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const i=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr),_.typstrenderer_load_glyph_pack(i,this.__wbg_ptr,v(t));var e=h().getInt32(i+0,!0),r=h().getInt32(i+4,!0);if(r)throw F(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}render_svg_diff(t,e,r,i,o){let s,u;try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const l=_.__wbindgen_add_to_stack_pointer(-16);if(b(this.__wbg_ptr),q(t,W),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");_.typstrenderer_render_svg_diff(l,this.__wbg_ptr,t.__wbg_ptr,e,r,i,o);var d=h().getInt32(l+0,!0),g=h().getInt32(l+4,!0);return s=d,u=g,E(d,g)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_3(s,u,1)}}svg_data(t,e){let r,i;try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const m=_.__wbindgen_add_to_stack_pointer(-16);if(b(this.__wbg_ptr),q(t,W),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");M(e)||b(e),_.typstrenderer_svg_data(m,this.__wbg_ptr,t.__wbg_ptr,M(e)?4294967297:e>>>0);var o=h().getInt32(m+0,!0),s=h().getInt32(m+4,!0),u=h().getInt32(m+8,!0),d=h().getInt32(m+12,!0),g=o,l=s;if(d)throw g=0,l=0,F(u);return r=g,i=l,E(g,l)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_3(r,i,1)}}get_customs(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");if(b(this.__wbg_ptr),q(t,W),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");const e=_.typstrenderer_get_customs(this.__wbg_ptr,t.__wbg_ptr);return F(e)}render_svg(t,e){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const s=_.__wbindgen_add_to_stack_pointer(-16);if(b(this.__wbg_ptr),q(t,W),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");_.typstrenderer_render_svg(s,this.__wbg_ptr,t.__wbg_ptr,v(e));var r=h().getInt32(s+0,!0),i=h().getInt32(s+4,!0),o=h().getInt32(s+8,!0);if(o)throw F(i);return r!==0}finally{_.__wbindgen_add_to_stack_pointer(16)}}create_worker(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const e=_.typstrenderer_create_worker(this.__wbg_ptr,v(t));return F(e)}create_worker_bridge(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const i=this.__destroy_into_raw(),o=_.__wbindgen_add_to_stack_pointer(-16);b(i),_.typstrenderer_create_worker_bridge(o,i);var t=h().getInt32(o+0,!0),e=h().getInt32(o+4,!0),r=h().getInt32(o+8,!0);if(r)throw F(e);return at.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}mount_dom(t,e){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");if(b(this.__wbg_ptr),q(t,W),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");const r=_.typstrenderer_mount_dom(this.__wbg_ptr,t.__wbg_ptr,v(e));return F(r)}render_page_to_canvas(t,e,r){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");if(b(this.__wbg_ptr),q(t,W),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");let i=0;if(!M(r)){if(q(r,Q),r.__wbg_ptr===0)throw new Error("Attempt to use a moved value");i=r.__destroy_into_raw()}const o=_.typstrenderer_render_page_to_canvas(this.__wbg_ptr,t.__wbg_ptr,v(e),i);return F(o)}}Symbol.dispose&&(_t.prototype[Symbol.dispose]=_t.prototype.free);const oe=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_typstrendererbuilder_free(n>>>0,1));class $t{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,oe.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_typstrendererbuilder_free(t,0)}constructor(){try{const i=_.__wbindgen_add_to_stack_pointer(-16);_.typstrendererbuilder_new(i);var t=h().getInt32(i+0,!0),e=h().getInt32(i+4,!0),r=h().getInt32(i+8,!0);if(r)throw F(e);return this.__wbg_ptr=t>>>0,oe.register(this,this.__wbg_ptr,this),this}finally{_.__wbindgen_add_to_stack_pointer(16)}}build(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const t=this.__destroy_into_raw();b(t);const e=_.typstrendererbuilder_build(t);return F(e)}add_glyph_pack(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const e=_.typstrendererbuilder_add_glyph_pack(this.__wbg_ptr,v(t));return F(e)}add_raw_font(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const e=_.typstrendererbuilder_add_raw_font(this.__wbg_ptr,v(t));return F(e)}add_lazy_font(t,e){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const r=_.typstrendererbuilder_add_lazy_font(this.__wbg_ptr,v(t),v(e));return F(r)}}Symbol.dispose&&($t.prototype[Symbol.dispose]=$t.prototype.free);const kr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_typstworker_free(n>>>0,1));class Dt{constructor(){throw new Error("cannot invoke `new` directly")}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,kr.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_typstworker_free(t,0)}manipulate_data(t,e){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const s=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr);const u=j(t,_.__wbindgen_export_1,_.__wbindgen_export_2),d=P;_.typstworker_manipulate_data(s,this.__wbg_ptr,u,d,v(e));var r=h().getInt32(s+0,!0),i=h().getInt32(s+4,!0),o=h().getInt32(s+8,!0);if(o)throw F(i);return F(r)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get_pages_info(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");b(this.__wbg_ptr);const t=_.typstworker_get_pages_info(this.__wbg_ptr);return F(t)}render_canvas(t,e,r){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const u=_.__wbindgen_add_to_stack_pointer(-16);b(this.__wbg_ptr);const d=xt(t,_.__wbindgen_export_1),g=P,l=Kt(e,_.__wbindgen_export_1),m=P,C=Kt(r,_.__wbindgen_export_1),R=P;_.typstworker_render_canvas(u,this.__wbg_ptr,d,g,l,m,C,R);var i=h().getInt32(u+0,!0),o=h().getInt32(u+4,!0),s=h().getInt32(u+8,!0);if(s)throw F(o);return F(i)}finally{_.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(Dt.prototype[Symbol.dispose]=Dt.prototype.free);const se=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_workerbridge_free(n>>>0,1));class at{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t=t>>>0;const e=Object.create(at.prototype);return e.__wbg_ptr=t,se.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,se.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_workerbridge_free(t,0)}}Symbol.dispose&&(at.prototype[Symbol.dispose]=at.prototype.free);const Er=new Set(["basic","cors","default"]);async function Rr(n,t){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,t)}catch(r){if(n.ok&&Er.has(n.type)&&n.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(n,t);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function ke(){const n={};return n.wbg={},n.wbg.__wbg_appendChild_87a6cc0aeb132c06=function(){return k(function(t,e){const r=c(t).appendChild(c(e));return v(r)},arguments)},n.wbg.__wbg_call_13410aac570ffff7=function(){return k(function(t,e){const r=c(t).call(c(e));return v(r)},arguments)},n.wbg.__wbg_call_641db1bb5db5a579=function(){return k(function(t,e,r,i){const o=c(t).call(c(e),c(r),c(i));return v(o)},arguments)},n.wbg.__wbg_call_a5400b25a865cfd8=function(){return k(function(t,e,r){const i=c(t).call(c(e),c(r));return v(i)},arguments)},n.wbg.__wbg_call_f1fd202ba222e0ec=function(){return k(function(t,e,r,i,o){const s=c(t).call(c(e),c(r),c(i),c(o));return v(s)},arguments)},n.wbg.__wbg_clearRect_448c93ecc652d129=function(){return f(function(t,e,r,i,o){c(t).clearRect(e,r,i,o)},arguments)},n.wbg.__wbg_clientWidth_8a498b7a82cae772=function(){return f(function(t){const e=c(t).clientWidth;return b(e),e},arguments)},n.wbg.__wbg_clip_2009d02864d41d14=function(){return f(function(t,e){c(t).clip(c(e))},arguments)},n.wbg.__wbg_clip_be4c2f92cf5ce700=function(){return f(function(t,e){c(t).clip(c(e))},arguments)},n.wbg.__wbg_cloneNode_79d46b18d5619863=function(){return k(function(t){const e=c(t).cloneNode();return v(e)},arguments)},n.wbg.__wbg_content_a26016a510c10d06=function(){return f(function(t){const e=c(t).content;return v(e)},arguments)},n.wbg.__wbg_createElement_4909dfa2011f2abe=function(){return k(function(t,e,r){const i=c(t).createElement(E(e,r));return v(i)},arguments)},n.wbg.__wbg_createImageBitmap_d788b02f79d6bb1c=function(){return k(function(t,e){const r=c(t).createImageBitmap(c(e));return v(r)},arguments)},n.wbg.__wbg_createImageBitmap_f0017ef8064b2e1d=function(){return k(function(t,e){const r=c(t).createImageBitmap(c(e));return v(r)},arguments)},n.wbg.__wbg_createObjectURL_c80225986d2b928b=function(){return k(function(t,e){const r=URL.createObjectURL(c(e)),i=j(r,_.__wbindgen_export_1,_.__wbindgen_export_2),o=P;h().setInt32(t+4,o,!0),h().setInt32(t+0,i,!0)},arguments)},n.wbg.__wbg_document_7d29d139bd619045=function(){return f(function(t){const e=c(t).document;return M(e)?0:v(e)},arguments)},n.wbg.__wbg_drawImage_0fcff80aa0873c4e=function(){return k(function(t,e,r,i){c(t).drawImage(c(e),r,i)},arguments)},n.wbg.__wbg_drawImage_231d6a0afcfbfc3d=function(){return k(function(t,e,r,i,o,s){c(t).drawImage(c(e),r,i,o,s)},arguments)},n.wbg.__wbg_drawImage_285f406fd1771a6d=function(){return k(function(t,e,r,i){c(t).drawImage(c(e),r,i)},arguments)},n.wbg.__wbg_drawImage_4902f5efaec99256=function(){return k(function(t,e,r,i,o,s){c(t).drawImage(c(e),r,i,o,s)},arguments)},n.wbg.__wbg_drawImage_69a008f28f3150a9=function(){return k(function(t,e,r,i,o,s){c(t).drawImage(c(e),r,i,o,s)},arguments)},n.wbg.__wbg_drawImage_b8b2c11c9e042476=function(){return k(function(t,e,r,i){c(t).drawImage(c(e),r,i)},arguments)},n.wbg.__wbg_drawImage_e6fefc71cc7e1583=function(){return k(function(t,e,r,i,o,s){c(t).drawImage(c(e),r,i,o,s)},arguments)},n.wbg.__wbg_error_7534b8e9a36f1ab4=function(){return f(function(t,e){let r,i;try{r=t,i=e,console.error(E(t,e))}finally{_.__wbindgen_export_3(r,i,1)}},arguments)},n.wbg.__wbg_fillRect_81988a39149f1e60=function(){return f(function(t,e,r,i,o){c(t).fillRect(e,r,i,o)},arguments)},n.wbg.__wbg_fillRect_a160edfa11fce49b=function(){return f(function(t,e,r,i,o){c(t).fillRect(e,r,i,o)},arguments)},n.wbg.__wbg_fill_062772ac70d2abe5=function(){return f(function(t,e){c(t).fill(c(e))},arguments)},n.wbg.__wbg_fill_3aba41a9072d4324=function(){return f(function(t,e,r){c(t).fill(c(e),Qt[r])},arguments)},n.wbg.__wbg_fill_8fa14f899c13b2b8=function(){return f(function(t,e,r){c(t).fill(c(e),Qt[r])},arguments)},n.wbg.__wbg_fill_a12dd0da87e4b294=function(){return f(function(t,e){c(t).fill(c(e))},arguments)},n.wbg.__wbg_firstElementChild_27076cbfeed86254=function(){return f(function(t){const e=c(t).firstElementChild;return M(e)?0:v(e)},arguments)},n.wbg.__wbg_firstElementChild_d38fc714a20581dc=function(){return f(function(t){const e=c(t).firstElementChild;return M(e)?0:v(e)},arguments)},n.wbg.__wbg_getAttribute_8bfaf67e99ed2ee3=function(){return f(function(t,e,r,i){const o=c(e).getAttribute(E(r,i));var s=M(o)?0:j(o,_.__wbindgen_export_1,_.__wbindgen_export_2),u=P;h().setInt32(t+4,u,!0),h().setInt32(t+0,s,!0)},arguments)},n.wbg.__wbg_getContext_15e158d04230a6f6=function(){return k(function(t,e,r){const i=c(t).getContext(E(e,r));return M(i)?0:v(i)},arguments)},n.wbg.__wbg_getContext_8b08935510bf607c=function(){return k(function(t,e,r){const i=c(t).getContext(E(e,r));return M(i)?0:v(i)},arguments)},n.wbg.__wbg_get_458e874b43b18b25=function(){return k(function(t,e){const r=Reflect.get(c(t),c(e));return v(r)},arguments)},n.wbg.__wbg_globalCompositeOperation_a9343749f60fc3c3=function(){return k(function(t,e){const r=c(e).globalCompositeOperation,i=j(r,_.__wbindgen_export_1,_.__wbindgen_export_2),o=P;h().setInt32(t+4,o,!0),h().setInt32(t+0,i,!0)},arguments)},n.wbg.__wbg_globalCompositeOperation_fca573f41169da73=function(){return k(function(t,e){const r=c(e).globalCompositeOperation,i=j(r,_.__wbindgen_export_1,_.__wbindgen_export_2),o=P;h().setInt32(t+4,o,!0),h().setInt32(t+0,i,!0)},arguments)},n.wbg.__wbg_height_dcede88ab14fa083=function(){return f(function(t){const e=c(t).height;return b(e),e},arguments)},n.wbg.__wbg_incrdomdocclient_new=function(){return f(function(t){const e=ot.__wrap(t);return v(e)},arguments)},n.wbg.__wbg_instanceof_CanvasRenderingContext2d_8c616198ec03b12f=function(){return f(function(t){let e;try{e=c(t)instanceof CanvasRenderingContext2D}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_Element_162e4334c7d6f450=function(){return f(function(t){let e;try{e=c(t)instanceof Element}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_HtmlCanvasElement_299c60950dbb3428=function(){return f(function(t){let e;try{e=c(t)instanceof HTMLCanvasElement}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_HtmlDivElement_d375b5c79180c917=function(){return f(function(t){let e;try{e=c(t)instanceof HTMLDivElement}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_HtmlElement_d60c51c41eb8699a=function(){return f(function(t){let e;try{e=c(t)instanceof HTMLElement}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_HtmlTemplateElement_68e5e8157bcbd653=function(){return f(function(t){let e;try{e=c(t)instanceof HTMLTemplateElement}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_ImageBitmap_e82e6a629ec3d3e8=function(){return f(function(t){let e;try{e=c(t)instanceof ImageBitmap}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_OffscreenCanvasRenderingContext2d_6234c9d9a0c6958a=function(){return f(function(t){let e;try{e=c(t)instanceof OffscreenCanvasRenderingContext2D}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_OffscreenCanvas_da9915e5258f24fb=function(){return f(function(t){let e;try{e=c(t)instanceof OffscreenCanvas}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_Promise_3ec9e849bf41bdb6=function(){return f(function(t){let e;try{e=c(t)instanceof Promise}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_SvgGraphicsElement_50bb1acb75ae606a=function(){return f(function(t){let e;try{e=c(t)instanceof SVGGraphicsElement}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_SvgsvgElement_b0e42b8ec77c0d1e=function(){return f(function(t){let e;try{e=c(t)instanceof SVGSVGElement}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_Window_12d20d558ef92592=function(){return f(function(t){let e;try{e=c(t)instanceof Window}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_instanceof_WorkerGlobalScope_85d487cc157fd065=function(){return f(function(t){let e;try{e=c(t)instanceof WorkerGlobalScope}catch{e=!1}const r=e;return L(r),r},arguments)},n.wbg.__wbg_lastElementChild_7b35e6537e048254=function(){return f(function(t){const e=c(t).lastElementChild;return M(e)?0:v(e)},arguments)},n.wbg.__wbg_length_6bb7e81f9d7713e4=function(){return f(function(t){const e=c(t).length;return b(e),e},arguments)},n.wbg.__wbg_log_6c7b5f4f00b8ce3f=function(){return f(function(t){console.log(c(t))},arguments)},n.wbg.__wbg_log_7917fde260a8fd39=function(){return f(function(t,e){console.log(c(t),c(e))},arguments)},n.wbg.__wbg_measureText_ce63d5548118a11b=function(){return k(function(t,e,r){const i=c(t).measureText(E(e,r));return v(i)},arguments)},n.wbg.__wbg_new_19c25a3f2fa63a02=function(){return f(function(){const t=new Object;return v(t)},arguments)},n.wbg.__wbg_new_1b0539a012a993e2=function(){return k(function(){const t=new Image;return v(t)},arguments)},n.wbg.__wbg_new_1f3a344cf3123716=function(){return f(function(){const t=new Array;return v(t)},arguments)},n.wbg.__wbg_new_2e3c58a15f39f5f9=function(){return f(function(t,e){try{var r={a:t,b:e},i=(s,u)=>{const d=r.a;r.a=0;try{return xr(d,r.b,s,u)}finally{r.a=d}};const o=new Promise(i);return v(o)}finally{r.a=r.b=0}},arguments)},n.wbg.__wbg_new_8a6f238a6ece86ea=function(){return f(function(){const t=new Error;return v(t)},arguments)},n.wbg.__wbg_new_da9dc54c5db29dfa=function(){return f(function(t,e){const r=new Error(E(t,e));return v(r)},arguments)},n.wbg.__wbg_new_dd6c7b0f98f05245=function(){return k(function(t,e){const r=new OffscreenCanvas(t>>>0,e>>>0);return v(r)},arguments)},n.wbg.__wbg_newfromslice_074c56947bd43469=function(){return f(function(t,e){const r=new Uint8Array(Gt(t,e));return v(r)},arguments)},n.wbg.__wbg_newnoargs_254190557c45b4ec=function(){return f(function(t,e){const r=new Function(E(t,e));return v(r)},arguments)},n.wbg.__wbg_newwithlength_a167dcc7aaa3ba77=function(){return f(function(t){const e=new Uint8Array(t>>>0);return v(e)},arguments)},n.wbg.__wbg_newwithpathstring_0dbb2ef6187c1fee=function(){return k(function(t,e){const r=new Path2D(E(t,e));return v(r)},arguments)},n.wbg.__wbg_newwithu8arraysequenceandoptions_2df1a97d9f42efa4=function(){return k(function(t,e){const r=new Blob(c(t),c(e));return v(r)},arguments)},n.wbg.__wbg_nextElementSibling_4b565fe9b7cdb849=function(){return f(function(t){const e=c(t).nextElementSibling;return M(e)?0:v(e)},arguments)},n.wbg.__wbg_push_330b2eb93e4e1212=function(){return f(function(t,e){const r=c(t).push(c(e));return b(r),r},arguments)},n.wbg.__wbg_putImageData_0324b5d1f2cb58d9=function(){return k(function(t,e,r,i){c(t).putImageData(c(e),r,i)},arguments)},n.wbg.__wbg_putImageData_3413ec0b4386cceb=function(){return k(function(t,e,r,i){c(t).putImageData(c(e),r,i)},arguments)},n.wbg.__wbg_queueMicrotask_25d0739ac89e8c88=function(){return f(function(t){queueMicrotask(c(t))},arguments)},n.wbg.__wbg_queueMicrotask_4488407636f5bf24=function(){return f(function(t){const e=c(t).queueMicrotask;return v(e)},arguments)},n.wbg.__wbg_removeProperty_8912427f4d0f6361=function(){return k(function(t,e,r,i){const o=c(e).removeProperty(E(r,i)),s=j(o,_.__wbindgen_export_1,_.__wbindgen_export_2),u=P;h().setInt32(t+4,u,!0),h().setInt32(t+0,s,!0)},arguments)},n.wbg.__wbg_remove_fec7bce376b31b32=function(){return f(function(t){c(t).remove()},arguments)},n.wbg.__wbg_renderpageimageoptions_unwrap=function(){return f(function(t){const e=Q.__unwrap(F(t));return b(e),e},arguments)},n.wbg.__wbg_replaceWith_b871dd8b39227476=function(){return k(function(t,e){c(t).replaceWith(c(e))},arguments)},n.wbg.__wbg_resolve_4055c623acdd6a1b=function(){return f(function(t){const e=Promise.resolve(c(t));return v(e)},arguments)},n.wbg.__wbg_restore_1367a274a3a9c52f=function(){return f(function(t){c(t).restore()},arguments)},n.wbg.__wbg_restore_45dead792d0756f6=function(){return f(function(t){c(t).restore()},arguments)},n.wbg.__wbg_revokeObjectURL_651b859c81bf1af0=function(){return k(function(t,e){URL.revokeObjectURL(E(t,e))},arguments)},n.wbg.__wbg_save_9c2af6c4f73acbb8=function(){return f(function(t){c(t).save()},arguments)},n.wbg.__wbg_save_e5fc517a51a9e73d=function(){return f(function(t){c(t).save()},arguments)},n.wbg.__wbg_setAttribute_d1baf9023ad5696f=function(){return k(function(t,e,r,i,o){c(t).setAttribute(E(e,r),E(i,o))},arguments)},n.wbg.__wbg_setLineDash_5c96338d7fd195f9=function(){return k(function(t,e){c(t).setLineDash(c(e))},arguments)},n.wbg.__wbg_setLineDash_7792494c18c240bc=function(){return k(function(t,e){c(t).setLineDash(c(e))},arguments)},n.wbg.__wbg_setProperty_a4431938dd3e6945=function(){return k(function(t,e,r,i,o){c(t).setProperty(E(e,r),E(i,o))},arguments)},n.wbg.__wbg_setTransform_64b36b5b2fe7eb81=function(){return k(function(t,e,r,i,o,s,u){c(t).setTransform(e,r,i,o,s,u)},arguments)},n.wbg.__wbg_setTransform_e8b3bc7c8210c0e6=function(){return k(function(t,e,r,i,o,s,u){c(t).setTransform(e,r,i,o,s,u)},arguments)},n.wbg.__wbg_set_1353b2a5e96bc48c=function(){return f(function(t,e,r){c(t).set(Gt(e,r))},arguments)},n.wbg.__wbg_set_453345bcda80b89a=function(){return k(function(t,e,r){const i=Reflect.set(c(t),c(e),c(r));return L(i),i},arguments)},n.wbg.__wbg_set_90f6c0f7bd8c0415=function(){return f(function(t,e,r){c(t)[e>>>0]=F(r)},arguments)},n.wbg.__wbg_setfillStyle_a9ad5b25cf62a5bc=function(){return f(function(t,e,r){c(t).fillStyle=E(e,r)},arguments)},n.wbg.__wbg_setfillStyle_dae40abc0110b0d0=function(){return f(function(t,e,r){c(t).fillStyle=E(e,r)},arguments)},n.wbg.__wbg_setfont_73ce8e14831e02ab=function(){return f(function(t,e,r){c(t).font=E(e,r)},arguments)},n.wbg.__wbg_setglobalCompositeOperation_e5ac8e2ee1998039=function(){return k(function(t,e,r){c(t).globalCompositeOperation=E(e,r)},arguments)},n.wbg.__wbg_setglobalCompositeOperation_e5ec3a5c4c8e9185=function(){return k(function(t,e,r){c(t).globalCompositeOperation=E(e,r)},arguments)},n.wbg.__wbg_setheight_4fce583024b2d088=function(){return f(function(t,e){c(t).height=e>>>0},arguments)},n.wbg.__wbg_setinnerHTML_34e240d6b8e8260c=function(){return f(function(t,e,r){c(t).innerHTML=E(e,r)},arguments)},n.wbg.__wbg_setlineCap_8032972ab3563404=function(){return f(function(t,e,r){c(t).lineCap=E(e,r)},arguments)},n.wbg.__wbg_setlineCap_c4746ffc7c654931=function(){return f(function(t,e,r){c(t).lineCap=E(e,r)},arguments)},n.wbg.__wbg_setlineDashOffset_8e4721199e50ad71=function(){return f(function(t,e){c(t).lineDashOffset=e},arguments)},n.wbg.__wbg_setlineDashOffset_f6bdd1bf33764013=function(){return f(function(t,e){c(t).lineDashOffset=e},arguments)},n.wbg.__wbg_setlineJoin_2ff9aa15911a2360=function(){return f(function(t,e,r){c(t).lineJoin=E(e,r)},arguments)},n.wbg.__wbg_setlineJoin_30c59321fbc0bd3d=function(){return f(function(t,e,r){c(t).lineJoin=E(e,r)},arguments)},n.wbg.__wbg_setlineWidth_069d571345379833=function(){return f(function(t,e){c(t).lineWidth=e},arguments)},n.wbg.__wbg_setlineWidth_c640999c86cc71b6=function(){return f(function(t,e){c(t).lineWidth=e},arguments)},n.wbg.__wbg_setmiterLimit_4b89ef6d3f97e1b0=function(){return f(function(t,e){c(t).miterLimit=e},arguments)},n.wbg.__wbg_setmiterLimit_b4aa08d1762d6104=function(){return f(function(t,e){c(t).miterLimit=e},arguments)},n.wbg.__wbg_setonerror_6eedc824b763863d=function(){return f(function(t,e){c(t).onerror=c(e)},arguments)},n.wbg.__wbg_setonload_5f59eacd9a040d42=function(){return f(function(t,e){c(t).onload=c(e)},arguments)},n.wbg.__wbg_setsrc_953e439f2c70484a=function(){return f(function(t,e,r){c(t).src=E(e,r)},arguments)},n.wbg.__wbg_setstrokeStyle_3c450999cfcdcd2f=function(){return f(function(t,e,r){c(t).strokeStyle=E(e,r)},arguments)},n.wbg.__wbg_setstrokeStyle_e602cffe46d6113f=function(){return f(function(t,e,r){c(t).strokeStyle=E(e,r)},arguments)},n.wbg.__wbg_settype_298968e371b58a33=function(){return f(function(t,e,r){c(t).type=E(e,r)},arguments)},n.wbg.__wbg_setwidth_40a6ed203b92839d=function(){return f(function(t,e){c(t).width=e>>>0},arguments)},n.wbg.__wbg_stack_0ed75d68575b0f3c=function(){return f(function(t,e){const r=c(e).stack,i=j(r,_.__wbindgen_export_1,_.__wbindgen_export_2),o=P;h().setInt32(t+4,o,!0),h().setInt32(t+0,i,!0)},arguments)},n.wbg.__wbg_static_accessor_GLOBAL_8921f820c2ce3f12=function(){return f(function(){const t=typeof global>"u"?null:global;return M(t)?0:v(t)},arguments)},n.wbg.__wbg_static_accessor_GLOBAL_THIS_f0a4409105898184=function(){return f(function(){const t=typeof globalThis>"u"?null:globalThis;return M(t)?0:v(t)},arguments)},n.wbg.__wbg_static_accessor_SELF_995b214ae681ff99=function(){return f(function(){const t=typeof self>"u"?null:self;return M(t)?0:v(t)},arguments)},n.wbg.__wbg_static_accessor_WINDOW_cde3890479c675ea=function(){return f(function(){const t=typeof window>"u"?null:window;return M(t)?0:v(t)},arguments)},n.wbg.__wbg_stringify_b98c93d0a190446a=function(){return k(function(t){const e=JSON.stringify(c(t));return v(e)},arguments)},n.wbg.__wbg_stroke_1682cb55b83fabcd=function(){return f(function(t,e){c(t).stroke(c(e))},arguments)},n.wbg.__wbg_stroke_84ffe7bcfdec57c3=function(){return f(function(t,e){c(t).stroke(c(e))},arguments)},n.wbg.__wbg_style_32a3c8393b46a115=function(){return f(function(t){const e=c(t).style;return v(e)},arguments)},n.wbg.__wbg_then_b33a773d723afa3e=function(){return f(function(t,e,r){const i=c(t).then(c(e),c(r));return v(i)},arguments)},n.wbg.__wbg_then_e22500defe16819f=function(){return f(function(t,e){const r=c(t).then(c(e));return v(r)},arguments)},n.wbg.__wbg_transferToImageBitmap_ebacbcba8c548fc6=function(){return k(function(t){const e=c(t).transferToImageBitmap();return v(e)},arguments)},n.wbg.__wbg_typstrenderer_new=function(){return f(function(t){const e=_t.__wrap(t);return v(e)},arguments)},n.wbg.__wbg_warn_e2ada06313f92f09=function(){return f(function(t){console.warn(c(t))},arguments)},n.wbg.__wbg_wbindgencbdrop_eb10308566512b88=function(t){const e=c(t).original;if(e.cnt--==1)return e.a=0,!0;const r=!1;return L(r),r},n.wbg.__wbg_wbindgendebugstring_99ef257a3ddda34d=function(t,e){const r=Ot(c(e)),i=j(r,_.__wbindgen_export_1,_.__wbindgen_export_2),o=P;h().setInt32(t+4,o,!0),h().setInt32(t+0,i,!0)},n.wbg.__wbg_wbindgenisfunction_8cee7dce3725ae74=function(t){const e=typeof c(t)=="function";return L(e),e},n.wbg.__wbg_wbindgenisundefined_c4b71d073b92f3c5=function(t){const e=c(t)===void 0;return L(e),e},n.wbg.__wbg_wbindgenjsvaleq_e6f2ad59ccae1b58=function(t,e){const r=c(t)===c(e);return L(r),r},n.wbg.__wbg_wbindgenstringget_0f16a6ddddef376f=function(t,e){const r=c(e),i=typeof r=="string"?r:void 0;var o=M(i)?0:j(i,_.__wbindgen_export_1,_.__wbindgen_export_2),s=P;h().setInt32(t+4,s,!0),h().setInt32(t+0,o,!0)},n.wbg.__wbg_wbindgenthrow_451ec1a8469d7eb6=function(t,e){throw new Error(E(t,e))},n.wbg.__wbg_width_5671cc92dc930a91=function(){return f(function(t){return c(t).width},arguments)},n.wbg.__wbg_width_cb2a94a03e71098c=function(){return f(function(t){const e=c(t).width;return b(e),e},arguments)},n.wbg.__wbindgen_cast_2241b6af4c4b2941=function(){return f(function(t,e){const r=E(t,e);return v(r)},arguments)},n.wbg.__wbindgen_cast_86466341b6bc6242=function(){return f(function(t,e){const r=Xt(t,e,391,Ir);return v(r)},arguments)},n.wbg.__wbindgen_cast_b3a874c70d0fc95a=function(){return f(function(t,e){const r=Xt(t,e,391,Sr);return v(r)},arguments)},n.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(){return f(function(t){return v(t)},arguments)},n.wbg.__wbindgen_cast_f6a59d405c61762b=function(){return f(function(t,e){const r=pr(t,e,474,vr);return v(r)},arguments)},n.wbg.__wbindgen_object_clone_ref=function(t){const e=c(t);return v(e)},n.wbg.__wbindgen_object_drop_ref=function(t){F(t)},n}function Ee(n,t){return _=n.exports,Re.__wbindgen_wasm_module=t,V=null,ft=null,gt=null,_}function Ar(n){if(_!==void 0)return _;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module:n}=n:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const t=ke();n instanceof WebAssembly.Module||(n=new WebAssembly.Module(n));const e=new WebAssembly.Instance(n,t);return Ee(e,n)}async function Re(n){if(_!==void 0)return _;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module_or_path:n}=n:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof n>"u"&&(n=Ae("typst_ts_renderer_bg.wasm",typeof document>"u"?require("url").pathToFileURL(__filename).href:rt&&rt.tagName.toUpperCase()==="SCRIPT"&&rt.src||new URL("cjs/main.bundle.js",document.baseURI).href));const t=ke();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:r}=await Rr(await n,t);return Ee(e,r)}let Ae=async function(n,t){throw new Error("Cannot import wasm module without importer: "+n+" "+t)};function Ce(n){Ae=n}let Cr=async function(n,t){const e=new Function("m","return import(m)"),{readFileSync:r}=await e("fs"),i=new URL(n,t);return await r(i).buffer};const Fr=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;Fr&&Ce(Cr);const Fe=Object.freeze(Object.defineProperty({__proto__:null,CreateSessionOptions:kt,IncrDomDocClient:ot,PageInfo:K,PagesInfo:st,RenderPageImageOptions:Q,RenderSession:W,RenderSessionOptions:Lt,TypstRenderer:_t,TypstRendererBuilder:$t,TypstWorker:Dt,WorkerBridge:at,default:Re,initSync:Ar,renderer_build_info:hr,setImportWasmModule:Ce},Symbol.toStringTag,{value:"Module"}));let a,lt=null;function it(){return(lt===null||lt.byteLength===0)&&(lt=new Uint8Array(a.memory.buffer)),lt}let vt=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});vt.decode();const Mr=2146435072;let Ft=0;function Pr(n,t){return Ft+=t,Ft>=Mr&&(vt=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),vt.decode(),Ft=t),vt.decode(it().subarray(n,n+t))}function U(n,t){return n=n>>>0,Pr(n,t)}let H=new Array(128).fill(void 0);H.push(void 0,null,!0,!1);let pt=H.length;function S(n){pt===H.length&&H.push(H.length+1);const t=pt;return pt=H[t],H[t]=n,t}function y(n){return H[n]}function Z(n,t){try{return n.apply(this,t)}catch(e){a.__wbindgen_export_0(S(e))}}function jt(n,t){return n=n>>>0,it().subarray(n/1,n/1+t)}let wt=null;function Tr(){return(wt===null||wt.byteLength===0)&&(wt=new Uint32Array(a.memory.buffer)),wt}function Or(n,t){return n=n>>>0,Tr().subarray(n/4,n/4+t)}function Lr(n){n<132||(H[n]=pt,pt=n)}function I(n){const t=y(n);return Lr(n),t}let A=0;const ht=new TextEncoder;"encodeInto"in ht||(ht.encodeInto=function(n,t){const e=ht.encode(n);return t.set(e),{read:n.length,written:e.length}});function T(n,t,e){if(e===void 0){const u=ht.encode(n),d=t(u.length,1)>>>0;return it().subarray(d,d+u.length).set(u),A=u.length,d}let r=n.length,i=t(r,1)>>>0;const o=it();let s=0;for(;s<r;s++){const u=n.charCodeAt(s);if(u>127)break;o[i+s]=u}if(s!==r){s!==0&&(n=n.slice(s)),i=e(i,r,r=s+n.length*3,1)>>>0;const u=it().subarray(i+s,i+r),d=ht.encodeInto(n,u);s+=d.written,i=e(i,r,s,1)>>>0}return A=s,i}let G=null;function w(){return(G===null||G.buffer.detached===!0||G.buffer.detached===void 0&&G.buffer!==a.memory.buffer)&&(G=new DataView(a.memory.buffer)),G}function O(n){return n==null}function Wt(n){const t=typeof n;if(t=="number"||t=="boolean"||n==null)return`${n}`;if(t=="string")return`"${n}"`;if(t=="symbol"){const i=n.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=n.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(n)){const i=n.length;let o="[";i>0&&(o+=Wt(n[0]));for(let s=1;s<i;s++)o+=", "+Wt(n[s]);return o+="]",o}const e=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(e&&e.length>1)r=e[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}const _e=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>{a.__wbindgen_export_4.get(n.dtor)(n.a,n.b)});function $r(n,t,e,r){const i={a:n,b:t,cnt:1,dtor:e},o=(...s)=>{i.cnt++;const u=i.a;i.a=0;try{return r(u,i.b,...s)}finally{--i.cnt===0?(a.__wbindgen_export_4.get(i.dtor)(u,i.b),_e.unregister(i)):i.a=u}};return o.original=i,_e.register(o,i,i),o}function Dr(n){const t=a.get_font_info(S(n));return I(t)}function Bt(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`)}function Me(n,t){const e=t(n.length*1,1)>>>0;return it().set(n,e/1),A=n.length,e}function jr(n,t){n=n>>>0;const e=w(),r=[];for(let i=n;i<n+4*t;i+=4)r.push(I(e.getUint32(i,!0)));return r}function mt(n,t){const e=t(n.length*4,4)>>>0,r=w();for(let i=0;i<n.length;i++)r.setUint32(e+4*i,S(n[i]),!0);return A=n.length,e}function Wr(n,t,e){a.__wbindgen_export_5(n,t,S(e))}function Br(n,t,e,r){a.__wbindgen_export_6(n,t,S(e),S(r))}const ae=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>a.__wbg_incrserver_free(n>>>0,1));class J{static __wrap(t){t=t>>>0;const e=Object.create(J.prototype);return e.__wbg_ptr=t,ae.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ae.unregister(this),t}free(){const t=this.__destroy_into_raw();a.__wbg_incrserver_free(t,0)}set_attach_debug_info(t){a.incrserver_set_attach_debug_info(this.__wbg_ptr,t)}current(){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.incrserver_current(r,this.__wbg_ptr);var t=w().getInt32(r+0,!0),e=w().getInt32(r+4,!0);let i;return t!==0&&(i=jt(t,e).slice(),a.__wbindgen_export_1(t,e*1,1)),i}finally{a.__wbindgen_add_to_stack_pointer(16)}}reset(){a.incrserver_reset(this.__wbg_ptr)}}Symbol.dispose&&(J.prototype[Symbol.dispose]=J.prototype.free);const Mt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>a.__wbg_proxycontext_free(n>>>0,1));class ct{static __wrap(t){t=t>>>0;const e=Object.create(ct.prototype);return e.__wbg_ptr=t,Mt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Mt.unregister(this),t}free(){const t=this.__destroy_into_raw();a.__wbg_proxycontext_free(t,0)}constructor(t){const e=a.proxycontext_new(S(t));return this.__wbg_ptr=e>>>0,Mt.register(this,this.__wbg_ptr,this),this}get context(){const t=a.proxycontext_context(this.__wbg_ptr);return I(t)}untar(t,e){try{const o=a.__wbindgen_add_to_stack_pointer(-16),s=Me(t,a.__wbindgen_export_2),u=A;a.proxycontext_untar(o,this.__wbg_ptr,s,u,S(e));var r=w().getInt32(o+0,!0),i=w().getInt32(o+4,!0);if(i)throw I(r)}finally{a.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(ct.prototype[Symbol.dispose]=ct.prototype.free);const ce=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>a.__wbg_typstcompileworld_free(n>>>0,1));class ut{static __wrap(t){t=t>>>0;const e=Object.create(ut.prototype);return e.__wbg_ptr=t,ce.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ce.unregister(this),t}free(){const t=this.__destroy_into_raw();a.__wbg_typstcompileworld_free(t,0)}compile(t,e){try{const s=a.__wbindgen_add_to_stack_pointer(-16);a.typstcompileworld_compile(s,this.__wbg_ptr,t,e);var r=w().getInt32(s+0,!0),i=w().getInt32(s+4,!0),o=w().getInt32(s+8,!0);if(o)throw I(i);return I(r)}finally{a.__wbindgen_add_to_stack_pointer(16)}}title(t){try{const s=a.__wbindgen_add_to_stack_pointer(-16);a.typstcompileworld_title(s,this.__wbg_ptr,t);var e=w().getInt32(s+0,!0),r=w().getInt32(s+4,!0),i=w().getInt32(s+8,!0),o=w().getInt32(s+12,!0);if(o)throw I(i);let u;return e!==0&&(u=U(e,r).slice(),a.__wbindgen_export_1(e,r*1,1)),u}finally{a.__wbindgen_add_to_stack_pointer(16)}}get_artifact(t,e){try{const s=a.__wbindgen_add_to_stack_pointer(-16);a.typstcompileworld_get_artifact(s,this.__wbg_ptr,t,e);var r=w().getInt32(s+0,!0),i=w().getInt32(s+4,!0),o=w().getInt32(s+8,!0);if(o)throw I(i);return I(r)}finally{a.__wbindgen_add_to_stack_pointer(16)}}query(t,e,r){let i,o;try{const $=a.__wbindgen_add_to_stack_pointer(-16),D=T(e,a.__wbindgen_export_2,a.__wbindgen_export_3),B=A;var s=O(r)?0:T(r,a.__wbindgen_export_2,a.__wbindgen_export_3),u=A;a.typstcompileworld_query($,this.__wbg_ptr,t,D,B,s,u);var d=w().getInt32($+0,!0),g=w().getInt32($+4,!0),l=w().getInt32($+8,!0),m=w().getInt32($+12,!0),C=d,R=g;if(m)throw C=0,R=0,I(l);return i=C,o=R,U(C,R)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_export_1(i,o,1)}}incr_compile(t,e){try{const s=a.__wbindgen_add_to_stack_pointer(-16);Bt(t,J),a.typstcompileworld_incr_compile(s,this.__wbg_ptr,t.__wbg_ptr,e);var r=w().getInt32(s+0,!0),i=w().getInt32(s+4,!0),o=w().getInt32(s+8,!0);if(o)throw I(i);return I(r)}finally{a.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(ut.prototype[Symbol.dispose]=ut.prototype.free);const ue=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>a.__wbg_typstcompiler_free(n>>>0,1));class dt{static __wrap(t){t=t>>>0;const e=Object.create(dt.prototype);return e.__wbg_ptr=t,ue.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ue.unregister(this),t}free(){const t=this.__destroy_into_raw();a.__wbg_typstcompiler_free(t,0)}reset(){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.typstcompiler_reset(r,this.__wbg_ptr);var t=w().getInt32(r+0,!0),e=w().getInt32(r+4,!0);if(e)throw I(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}set_fonts(t){try{const i=a.__wbindgen_add_to_stack_pointer(-16);Bt(t,Y),a.typstcompiler_set_fonts(i,this.__wbg_ptr,t.__wbg_ptr);var e=w().getInt32(i+0,!0),r=w().getInt32(i+4,!0);if(r)throw I(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}set_inputs(t){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.typstcompiler_set_inputs(i,this.__wbg_ptr,S(t));var e=w().getInt32(i+0,!0),r=w().getInt32(i+4,!0);if(r)throw I(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}add_source(t,e){const r=T(t,a.__wbindgen_export_2,a.__wbindgen_export_3),i=A,o=T(e,a.__wbindgen_export_2,a.__wbindgen_export_3),s=A;return a.typstcompiler_add_source(this.__wbg_ptr,r,i,o,s)!==0}map_shadow(t,e){const r=T(t,a.__wbindgen_export_2,a.__wbindgen_export_3),i=A,o=Me(e,a.__wbindgen_export_2),s=A;return a.typstcompiler_map_shadow(this.__wbg_ptr,r,i,o,s)!==0}unmap_shadow(t){const e=T(t,a.__wbindgen_export_2,a.__wbindgen_export_3),r=A;return a.typstcompiler_unmap_shadow(this.__wbg_ptr,e,r)!==0}reset_shadow(){a.typstcompiler_reset_shadow(this.__wbg_ptr)}get_loaded_fonts(){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.typstcompiler_get_loaded_fonts(i,this.__wbg_ptr);var t=w().getInt32(i+0,!0),e=w().getInt32(i+4,!0),r=jr(t,e).slice();return a.__wbindgen_export_1(t,e*4,4),r}finally{a.__wbindgen_add_to_stack_pointer(16)}}get_ast(t){let e,r;try{const l=a.__wbindgen_add_to_stack_pointer(-16),m=T(t,a.__wbindgen_export_2,a.__wbindgen_export_3),C=A;a.typstcompiler_get_ast(l,this.__wbg_ptr,m,C);var i=w().getInt32(l+0,!0),o=w().getInt32(l+4,!0),s=w().getInt32(l+8,!0),u=w().getInt32(l+12,!0),d=i,g=o;if(u)throw d=0,g=0,I(s);return e=d,r=g,U(d,g)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_export_1(e,r,1)}}get_semantic_token_legend(){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.typstcompiler_get_semantic_token_legend(i,this.__wbg_ptr);var t=w().getInt32(i+0,!0),e=w().getInt32(i+4,!0),r=w().getInt32(i+8,!0);if(r)throw I(e);return I(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}get_semantic_tokens(t,e,r){try{const m=a.__wbindgen_add_to_stack_pointer(-16),C=T(t,a.__wbindgen_export_2,a.__wbindgen_export_3),R=A;var i=O(e)?0:T(e,a.__wbindgen_export_2,a.__wbindgen_export_3),o=A,s=O(r)?0:T(r,a.__wbindgen_export_2,a.__wbindgen_export_3),u=A;a.typstcompiler_get_semantic_tokens(m,this.__wbg_ptr,C,R,i,o,s,u);var d=w().getInt32(m+0,!0),g=w().getInt32(m+4,!0),l=w().getInt32(m+8,!0);if(l)throw I(g);return I(d)}finally{a.__wbindgen_add_to_stack_pointer(16)}}snapshot(t,e,r){try{const R=a.__wbindgen_add_to_stack_pointer(-16);var i=O(t)?0:T(t,a.__wbindgen_export_2,a.__wbindgen_export_3),o=A,s=O(e)?0:T(e,a.__wbindgen_export_2,a.__wbindgen_export_3),u=A,d=O(r)?0:mt(r,a.__wbindgen_export_2),g=A;a.typstcompiler_snapshot(R,this.__wbg_ptr,i,o,s,u,d,g);var l=w().getInt32(R+0,!0),m=w().getInt32(R+4,!0),C=w().getInt32(R+8,!0);if(C)throw I(m);return ut.__wrap(l)}finally{a.__wbindgen_add_to_stack_pointer(16)}}get_artifact(t,e){try{const s=a.__wbindgen_add_to_stack_pointer(-16),u=T(t,a.__wbindgen_export_2,a.__wbindgen_export_3),d=A;a.typstcompiler_get_artifact(s,this.__wbg_ptr,u,d,e);var r=w().getInt32(s+0,!0),i=w().getInt32(s+4,!0),o=w().getInt32(s+8,!0);if(o)throw I(i);return I(r)}finally{a.__wbindgen_add_to_stack_pointer(16)}}compile(t,e,r,i){try{const C=a.__wbindgen_add_to_stack_pointer(-16);var o=O(t)?0:T(t,a.__wbindgen_export_2,a.__wbindgen_export_3),s=A,u=O(e)?0:mt(e,a.__wbindgen_export_2),d=A;const R=T(r,a.__wbindgen_export_2,a.__wbindgen_export_3),$=A;a.typstcompiler_compile(C,this.__wbg_ptr,o,s,u,d,R,$,i);var g=w().getInt32(C+0,!0),l=w().getInt32(C+4,!0),m=w().getInt32(C+8,!0);if(m)throw I(l);return I(g)}finally{a.__wbindgen_add_to_stack_pointer(16)}}query(t,e,r,i){let o,s;try{const z=a.__wbindgen_add_to_stack_pointer(-16),je=T(t,a.__wbindgen_export_2,a.__wbindgen_export_3),We=A;var u=O(e)?0:mt(e,a.__wbindgen_export_2),d=A;const Be=T(r,a.__wbindgen_export_2,a.__wbindgen_export_3),ze=A;var g=O(i)?0:T(i,a.__wbindgen_export_2,a.__wbindgen_export_3),l=A;a.typstcompiler_query(z,this.__wbg_ptr,je,We,u,d,Be,ze,g,l);var m=w().getInt32(z+0,!0),C=w().getInt32(z+4,!0),R=w().getInt32(z+8,!0),$=w().getInt32(z+12,!0),D=m,B=C;if($)throw D=0,B=0,I(R);return o=D,s=B,U(D,B)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_export_1(o,s,1)}}create_incr_server(){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.typstcompiler_create_incr_server(i,this.__wbg_ptr);var t=w().getInt32(i+0,!0),e=w().getInt32(i+4,!0),r=w().getInt32(i+8,!0);if(r)throw I(e);return J.__wrap(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}incr_compile(t,e,r,i){try{const l=a.__wbindgen_add_to_stack_pointer(-16),m=T(t,a.__wbindgen_export_2,a.__wbindgen_export_3),C=A;var o=O(e)?0:mt(e,a.__wbindgen_export_2),s=A;Bt(r,J),a.typstcompiler_incr_compile(l,this.__wbg_ptr,m,C,o,s,r.__wbg_ptr,i);var u=w().getInt32(l+0,!0),d=w().getInt32(l+4,!0),g=w().getInt32(l+8,!0);if(g)throw I(d);return I(u)}finally{a.__wbindgen_add_to_stack_pointer(16)}}}Symbol.dispose&&(dt.prototype[Symbol.dispose]=dt.prototype.free);const de=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>a.__wbg_typstcompilerbuilder_free(n>>>0,1));class zt{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,de.unregister(this),t}free(){const t=this.__destroy_into_raw();a.__wbg_typstcompilerbuilder_free(t,0)}constructor(){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.typstcompilerbuilder_new(i);var t=w().getInt32(i+0,!0),e=w().getInt32(i+4,!0),r=w().getInt32(i+8,!0);if(r)throw I(e);return this.__wbg_ptr=t>>>0,de.register(this,this.__wbg_ptr,this),this}finally{a.__wbindgen_add_to_stack_pointer(16)}}set_dummy_access_model(){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.typstcompilerbuilder_set_dummy_access_model(r,this.__wbg_ptr);var t=w().getInt32(r+0,!0),e=w().getInt32(r+4,!0);if(e)throw I(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}set_access_model(t,e,r,i,o){const s=a.typstcompilerbuilder_set_access_model(this.__wbg_ptr,S(t),S(e),S(r),S(i),S(o));return I(s)}set_package_registry(t,e){const r=a.typstcompilerbuilder_set_package_registry(this.__wbg_ptr,S(t),S(e));return I(r)}add_raw_font(t){const e=a.typstcompilerbuilder_add_raw_font(this.__wbg_ptr,S(t));return I(e)}add_lazy_font(t,e){const r=a.typstcompilerbuilder_add_lazy_font(this.__wbg_ptr,S(t),S(e));return I(r)}build(){const t=this.__destroy_into_raw(),e=a.typstcompilerbuilder_build(t);return I(e)}}Symbol.dispose&&(zt.prototype[Symbol.dispose]=zt.prototype.free);const ge=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>a.__wbg_typstfontresolver_free(n>>>0,1));class Y{static __wrap(t){t=t>>>0;const e=Object.create(Y.prototype);return e.__wbg_ptr=t,ge.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ge.unregister(this),t}free(){const t=this.__destroy_into_raw();a.__wbg_typstfontresolver_free(t,0)}}Symbol.dispose&&(Y.prototype[Symbol.dispose]=Y.prototype.free);const fe=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>a.__wbg_typstfontresolverbuilder_free(n>>>0,1));class Ut{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,fe.unregister(this),t}free(){const t=this.__destroy_into_raw();a.__wbg_typstfontresolverbuilder_free(t,0)}constructor(){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.typstfontresolverbuilder_new(i);var t=w().getInt32(i+0,!0),e=w().getInt32(i+4,!0),r=w().getInt32(i+8,!0);if(r)throw I(e);return this.__wbg_ptr=t>>>0,fe.register(this,this.__wbg_ptr,this),this}finally{a.__wbindgen_add_to_stack_pointer(16)}}get_font_info(t){try{const o=a.__wbindgen_add_to_stack_pointer(-16);a.typstfontresolverbuilder_get_font_info(o,this.__wbg_ptr,S(t));var e=w().getInt32(o+0,!0),r=w().getInt32(o+4,!0),i=w().getInt32(o+8,!0);if(i)throw I(r);return I(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}add_raw_font(t){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.typstfontresolverbuilder_add_raw_font(i,this.__wbg_ptr,S(t));var e=w().getInt32(i+0,!0),r=w().getInt32(i+4,!0);if(r)throw I(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}add_lazy_font(t,e){try{const o=a.__wbindgen_add_to_stack_pointer(-16);a.typstfontresolverbuilder_add_lazy_font(o,this.__wbg_ptr,S(t),S(e));var r=w().getInt32(o+0,!0),i=w().getInt32(o+4,!0);if(i)throw I(r)}finally{a.__wbindgen_add_to_stack_pointer(16)}}build(){const t=this.__destroy_into_raw(),e=a.typstfontresolverbuilder_build(t);return I(e)}}Symbol.dispose&&(Ut.prototype[Symbol.dispose]=Ut.prototype.free);const zr=new Set(["basic","cors","default"]);async function Ur(n,t){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,t)}catch(r){if(n.ok&&zr.has(n.type)&&n.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(n,t);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function Pe(){const n={};return n.wbg={},n.wbg.__wbg_Error_e17e777aac105295=function(t,e){const r=Error(U(t,e));return S(r)},n.wbg.__wbg_Number_998bea33bd87c3e0=function(t){return Number(y(t))},n.wbg.__wbg_call_13410aac570ffff7=function(){return Z(function(t,e){const r=y(t).call(y(e));return S(r)},arguments)},n.wbg.__wbg_call_a5400b25a865cfd8=function(){return Z(function(t,e,r){const i=y(t).call(y(e),y(r));return S(i)},arguments)},n.wbg.__wbg_call_f1fd202ba222e0ec=function(){return Z(function(t,e,r,i,o){const s=y(t).call(y(e),y(r),y(i),y(o));return S(s)},arguments)},n.wbg.__wbg_done_75ed0ee6dd243d9d=function(t){return y(t).done},n.wbg.__wbg_entries_2be2f15bd5554996=function(t){const e=Object.entries(y(t));return S(e)},n.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,e){let r,i;try{r=t,i=e,console.error(U(t,e))}finally{a.__wbindgen_export_1(r,i,1)}},n.wbg.__wbg_error_9eeaeffe2964d2ba=function(t,e,r){console.error(y(t),y(e),y(r))},n.wbg.__wbg_getTimezoneOffset_1e3ddc1382e7c8b0=function(t){return y(t).getTimezoneOffset()},n.wbg.__wbg_get_0da715ceaecea5c8=function(t,e){const r=y(t)[e>>>0];return S(r)},n.wbg.__wbg_get_458e874b43b18b25=function(){return Z(function(t,e){const r=Reflect.get(y(t),y(e));return S(r)},arguments)},n.wbg.__wbg_getwithrefkey_1dc361bd10053bfe=function(t,e){const r=y(t)[y(e)];return S(r)},n.wbg.__wbg_info_6cf68c1a86a92f6a=function(t){console.info(y(t))},n.wbg.__wbg_instanceof_ArrayBuffer_67f3012529f6a2dd=function(t){let e;try{e=y(t)instanceof ArrayBuffer}catch{e=!1}return e},n.wbg.__wbg_instanceof_Map_ebb01a5b6b5ffd0b=function(t){let e;try{e=y(t)instanceof Map}catch{e=!1}return e},n.wbg.__wbg_instanceof_Uint8Array_9a8378d955933db7=function(t){let e;try{e=y(t)instanceof Uint8Array}catch{e=!1}return e},n.wbg.__wbg_isArray_030cce220591fb41=function(t){return Array.isArray(y(t))},n.wbg.__wbg_isSafeInteger_1c0d1af5542e102a=function(t){return Number.isSafeInteger(y(t))},n.wbg.__wbg_iterator_f370b34483c71a1c=function(){return S(Symbol.iterator)},n.wbg.__wbg_length_186546c51cd61acd=function(t){return y(t).length},n.wbg.__wbg_length_6bb7e81f9d7713e4=function(t){return y(t).length},n.wbg.__wbg_new_19c25a3f2fa63a02=function(){const t=new Object;return S(t)},n.wbg.__wbg_new_1f3a344cf3123716=function(){const t=new Array;return S(t)},n.wbg.__wbg_new_2e3c58a15f39f5f9=function(t,e){try{var r={a:t,b:e},i=(s,u)=>{const d=r.a;r.a=0;try{return Br(d,r.b,s,u)}finally{r.a=d}};const o=new Promise(i);return S(o)}finally{r.a=r.b=0}},n.wbg.__wbg_new_5a2ae4557f92b50e=function(t){const e=new Date(y(t));return S(e)},n.wbg.__wbg_new_638ebfaedbf32a5e=function(t){const e=new Uint8Array(y(t));return S(e)},n.wbg.__wbg_new_8a6f238a6ece86ea=function(){const t=new Error;return S(t)},n.wbg.__wbg_new_da9dc54c5db29dfa=function(t,e){const r=new Error(U(t,e));return S(r)},n.wbg.__wbg_newfromslice_074c56947bd43469=function(t,e){const r=new Uint8Array(jt(t,e));return S(r)},n.wbg.__wbg_newfromslice_bd5b07f10e7e3c36=function(t,e){const r=new Uint32Array(Or(t,e));return S(r)},n.wbg.__wbg_newnoargs_254190557c45b4ec=function(t,e){const r=new Function(U(t,e));return S(r)},n.wbg.__wbg_newwithargs_b8065bb443501079=function(t,e,r,i){const o=new Function(U(t,e),U(r,i));return S(o)},n.wbg.__wbg_next_5b3530e612fde77d=function(t){const e=y(t).next;return S(e)},n.wbg.__wbg_next_692e82279131b03c=function(){return Z(function(t){const e=y(t).next();return S(e)},arguments)},n.wbg.__wbg_now_1e80617bcee43265=function(){return Date.now()},n.wbg.__wbg_prototypesetcall_3d4a26c1ed734349=function(t,e,r){Uint8Array.prototype.set.call(jt(t,e),y(r))},n.wbg.__wbg_proxycontext_new=function(t){const e=ct.__wrap(t);return S(e)},n.wbg.__wbg_push_330b2eb93e4e1212=function(t,e){return y(t).push(y(e))},n.wbg.__wbg_queueMicrotask_25d0739ac89e8c88=function(t){queueMicrotask(y(t))},n.wbg.__wbg_queueMicrotask_4488407636f5bf24=function(t){const e=y(t).queueMicrotask;return S(e)},n.wbg.__wbg_resolve_4055c623acdd6a1b=function(t){const e=Promise.resolve(y(t));return S(e)},n.wbg.__wbg_set_3f1d0b984ed272ed=function(t,e,r){y(t)[I(e)]=I(r)},n.wbg.__wbg_set_453345bcda80b89a=function(){return Z(function(t,e,r){return Reflect.set(y(t),y(e),y(r))},arguments)},n.wbg.__wbg_set_90f6c0f7bd8c0415=function(t,e,r){y(t)[e>>>0]=I(r)},n.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,e){const r=y(e).stack,i=T(r,a.__wbindgen_export_2,a.__wbindgen_export_3),o=A;w().setInt32(t+4,o,!0),w().setInt32(t+0,i,!0)},n.wbg.__wbg_static_accessor_GLOBAL_8921f820c2ce3f12=function(){const t=typeof global>"u"?null:global;return O(t)?0:S(t)},n.wbg.__wbg_static_accessor_GLOBAL_THIS_f0a4409105898184=function(){const t=typeof globalThis>"u"?null:globalThis;return O(t)?0:S(t)},n.wbg.__wbg_static_accessor_SELF_995b214ae681ff99=function(){const t=typeof self>"u"?null:self;return O(t)?0:S(t)},n.wbg.__wbg_static_accessor_WINDOW_cde3890479c675ea=function(){const t=typeof window>"u"?null:window;return O(t)?0:S(t)},n.wbg.__wbg_then_e22500defe16819f=function(t,e){const r=y(t).then(y(e));return S(r)},n.wbg.__wbg_typstcompiler_new=function(t){const e=dt.__wrap(t);return S(e)},n.wbg.__wbg_typstfontresolver_new=function(t){const e=Y.__wrap(t);return S(e)},n.wbg.__wbg_value_dd9372230531eade=function(t){const e=y(t).value;return S(e)},n.wbg.__wbg_wbindgenbigintgetasi64_ac743ece6ab9bba1=function(t,e){const r=y(e),i=typeof r=="bigint"?r:void 0;w().setBigInt64(t+8,O(i)?BigInt(0):i,!0),w().setInt32(t+0,!O(i),!0)},n.wbg.__wbg_wbindgenbooleanget_3fe6f642c7d97746=function(t){const e=y(t),r=typeof e=="boolean"?e:void 0;return O(r)?16777215:r?1:0},n.wbg.__wbg_wbindgencbdrop_eb10308566512b88=function(t){const e=y(t).original;return e.cnt--==1?(e.a=0,!0):!1},n.wbg.__wbg_wbindgendebugstring_99ef257a3ddda34d=function(t,e){const r=Wt(y(e)),i=T(r,a.__wbindgen_export_2,a.__wbindgen_export_3),o=A;w().setInt32(t+4,o,!0),w().setInt32(t+0,i,!0)},n.wbg.__wbg_wbindgenin_d7a1ee10933d2d55=function(t,e){return y(t)in y(e)},n.wbg.__wbg_wbindgenisbigint_ecb90cc08a5a9154=function(t){return typeof y(t)=="bigint"},n.wbg.__wbg_wbindgenisfunction_8cee7dce3725ae74=function(t){return typeof y(t)=="function"},n.wbg.__wbg_wbindgenisobject_307a53c6bd97fbf8=function(t){const e=y(t);return typeof e=="object"&&e!==null},n.wbg.__wbg_wbindgenisstring_d4fa939789f003b0=function(t){return typeof y(t)=="string"},n.wbg.__wbg_wbindgenisundefined_c4b71d073b92f3c5=function(t){return y(t)===void 0},n.wbg.__wbg_wbindgenjsvaleq_e6f2ad59ccae1b58=function(t,e){return y(t)===y(e)},n.wbg.__wbg_wbindgenjsvallooseeq_9bec8c9be826bed1=function(t,e){return y(t)==y(e)},n.wbg.__wbg_wbindgennumberget_f74b4c7525ac05cb=function(t,e){const r=y(e),i=typeof r=="number"?r:void 0;w().setFloat64(t+8,O(i)?0:i,!0),w().setInt32(t+0,!O(i),!0)},n.wbg.__wbg_wbindgenstringget_0f16a6ddddef376f=function(t,e){const r=y(e),i=typeof r=="string"?r:void 0;var o=O(i)?0:T(i,a.__wbindgen_export_2,a.__wbindgen_export_3),s=A;w().setInt32(t+4,s,!0),w().setInt32(t+0,o,!0)},n.wbg.__wbg_wbindgenthrow_451ec1a8469d7eb6=function(t,e){throw new Error(U(t,e))},n.wbg.__wbindgen_cast_18dd738794d8ed40=function(t,e){const r=$r(t,e,238,Wr);return S(r)},n.wbg.__wbindgen_cast_2241b6af4c4b2941=function(t,e){const r=U(t,e);return S(r)},n.wbg.__wbindgen_cast_4625c577ab2ec9ee=function(t){const e=BigInt.asUintN(64,t);return S(e)},n.wbg.__wbindgen_cast_9ae0607507abb057=function(t){return S(t)},n.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(t){return S(t)},n.wbg.__wbindgen_object_clone_ref=function(t){const e=y(t);return S(e)},n.wbg.__wbindgen_object_drop_ref=function(t){I(t)},n}function Te(n,t){return a=n.exports,Oe.__wbindgen_wasm_module=t,G=null,wt=null,lt=null,a}function qr(n){if(a!==void 0)return a;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module:n}=n:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const t=Pe();n instanceof WebAssembly.Module||(n=new WebAssembly.Module(n));const e=new WebAssembly.Instance(n,t);return Te(e,n)}async function Oe(n){if(a!==void 0)return a;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module_or_path:n}=n:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof n>"u"&&(n=Le("typst_ts_web_compiler_bg.wasm",typeof document>"u"?require("url").pathToFileURL(__filename).href:rt&&rt.tagName.toUpperCase()==="SCRIPT"&&rt.src||new URL("cjs/main.bundle.js",document.baseURI).href));const t=Pe();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:r}=await Ur(await n,t);return Te(e,r)}let Le=async function(n,t){throw new Error("Cannot import wasm module without importer: "+n+" "+t)};function $e(n){Le=n}let Nr=async function(n,t){const e=new Function("m","return import(m)"),{readFileSync:r}=await e("fs"),i=new URL(n,t);return await r(i).buffer};const Hr=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;Hr&&$e(Nr);const De=Object.freeze(Object.defineProperty({__proto__:null,IncrServer:J,ProxyContext:ct,TypstCompileWorld:ut,TypstCompiler:dt,TypstCompilerBuilder:zt,TypstFontResolver:Y,TypstFontResolverBuilder:Ut,default:Oe,get_font_info:Dr,initSync:qr,setImportWasmModule:$e},Symbol.toStringTag,{value:"Module"}));exports.FetchAccessModel=Ie;exports.FetchPackageRegistry=xe;exports.createTypstCompiler=Ht;exports.createTypstRenderer=Tt;exports.loadFonts=X;exports.preloadRemoteFonts=Xe;exports.preloadSystemFonts=Pt;exports.rendererBuildInfo=_r;
